# æ ‡è®°æ ‡æ³¨ç³»ç»Ÿè®¾è®¡ï¼ˆMarker Annotation Systemï¼‰

> **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
> **åˆ›å»ºæ—¥æœŸ**ï¼š2026-02-17  
> **æœ€åæ›´æ–°**ï¼š2026-02-17  
> **çŠ¶æ€**ï¼šâœ… activeï¼ˆPhase 1~6 å…¨éƒ¨å®ç°å®Œæˆï¼‰  
> **é‡è¦æ€§**ï¼šğŸŸ¡ å­ç³»ç»Ÿè®¾è®¡  
> **å…³è”**ï¼š[SceneMarkerç³»ç»Ÿè®¾è®¡](SceneMarkerç³»ç»Ÿè®¾è®¡.md)ã€[SceneBlueprintæ ¸å¿ƒè®¾è®¡åŸåˆ™](SceneBlueprintæ ¸å¿ƒè®¾è®¡åŸåˆ™.md) Â§8  
> **doc_status**: active  
> **last_reviewed**: 2026-02-17

---

## ç›®å½•

- [ä¸€ã€é—®é¢˜èƒŒæ™¯ä¸è®¾è®¡åŠ¨æœº](#ä¸€é—®é¢˜èƒŒæ™¯ä¸è®¾è®¡åŠ¨æœº)
- [äºŒã€æ ¸å¿ƒè®¾è®¡åŸåˆ™](#äºŒæ ¸å¿ƒè®¾è®¡åŸåˆ™)
- [ä¸‰ã€æ¶æ„æ€»è§ˆ](#ä¸‰æ¶æ„æ€»è§ˆ)
- [å››ã€è¿è¡Œæ—¶å±‚ï¼šMarkerAnnotation åŸºç±»](#å››è¿è¡Œæ—¶å±‚markerannotation-åŸºç±»)
  - [4.1 åŸºç±»è®¾è®¡](#41-åŸºç±»è®¾è®¡)
  - [4.2 å…·ä½“æ ‡æ³¨ç»„ä»¶](#42-å…·ä½“æ ‡æ³¨ç»„ä»¶)
  - [4.3 ç»„ä»¶å…±å­˜è§„åˆ™](#43-ç»„ä»¶å…±å­˜è§„åˆ™)
- [äº”ã€ç¼–è¾‘å™¨å±‚ï¼šæ ‡æ³¨å®šä¹‰æ³¨å†Œè¡¨](#äº”ç¼–è¾‘å™¨å±‚æ ‡æ³¨å®šä¹‰æ³¨å†Œè¡¨)
  - [5.1 AnnotationDefinition](#51-annotationdefinition)
  - [5.2 AutoDiscover æ³¨å†Œè¡¨](#52-autodiscover-æ³¨å†Œè¡¨)
- [å…­ã€Gizmo é›†æˆ](#å…­gizmo-é›†æˆ)
  - [6.1 Decoration é˜¶æ®µ](#61-decoration-é˜¶æ®µ)
  - [6.2 é¢œè‰²è¦†ç›–ä¼˜å…ˆçº§](#62-é¢œè‰²è¦†ç›–ä¼˜å…ˆçº§)
  - [6.3 MarkerCache ç¼“å­˜æ‰©å±•](#63-markercache-ç¼“å­˜æ‰©å±•)
- [ä¸ƒã€Blueprint èŠ‚ç‚¹ç»‘å®šä¸å¯¼å‡º](#ä¸ƒblueprint-èŠ‚ç‚¹ç»‘å®šä¸å¯¼å‡º)
  - [7.1 Spawn.Preset çš„åŒç»‘å®šæ§½è®¾è®¡](#71-spawnpreset-çš„åŒç»‘å®šæ§½è®¾è®¡)
  - [7.2 å¯¼å‡ºå™¨æ”¶é›†é€»è¾‘](#72-å¯¼å‡ºå™¨æ”¶é›†é€»è¾‘)
  - [7.3 å¯¼å‡ºæ•°æ®ä¼˜å…ˆçº§](#73-å¯¼å‡ºæ•°æ®ä¼˜å…ˆçº§)
- [å…«ã€ä½ç½®ç”Ÿæˆå·¥å…·é›†æˆ](#å…«ä½ç½®ç”Ÿæˆå·¥å…·é›†æˆ)
- [ä¹ã€ç­–åˆ’å®Œæ•´å·¥ä½œæµ](#ä¹ç­–åˆ’å®Œæ•´å·¥ä½œæµ)
- [åã€ç›®å½•ç»“æ„](#åç›®å½•ç»“æ„)
- [åä¸€ã€å®æ–½è·¯çº¿](#åä¸€å®æ–½è·¯çº¿)
- [åäºŒã€è®¾è®¡å†³ç­–è®°å½•](#åäºŒè®¾è®¡å†³ç­–è®°å½•)
- [åä¸‰ã€å¼€æ”¾é—®é¢˜](#åä¸‰å¼€æ”¾é—®é¢˜)

---

## ä¸€ã€é—®é¢˜èƒŒæ™¯ä¸è®¾è®¡åŠ¨æœº

### 1.1 ç°çŠ¶

SceneMarker ç³»ç»Ÿä¸­ï¼ŒMarker æ˜¯çº¯ç©ºé—´æ ‡è®°ï¼š

- `PointMarker`ï¼šposition + rotation
- `AreaMarker`ï¼špolygon / box åŒºåŸŸ
- `EntityMarker`ï¼šPrefab å®ä¾‹ä½ç½®

Blueprint èŠ‚ç‚¹é€šè¿‡ `SceneBinding`ï¼ˆMarkerIdï¼‰å¼•ç”¨ Markerï¼Œæè¿°è¿è¡Œæ—¶æµç¨‹ã€‚

### 1.2 æ–°éœ€æ±‚

åœ¨"é¢„è®¾åˆ·æ€ª"åœºæ™¯ä¸­ï¼Œç­–åˆ’éœ€è¦ï¼š

1. ç»™æ¯ä¸ª PointMarker æŒ‡å®š**æ€ªç‰© IDã€ç­‰çº§ã€åˆå§‹è¡Œä¸º**ç­‰æ ‡æ³¨ä¿¡æ¯
2. åŒä¸€ä¸ª PointMarker å¯èƒ½åŒæ—¶è¢«**åˆ·æ€ªèŠ‚ç‚¹å’Œç›¸æœºèŠ‚ç‚¹**å¼•ç”¨
3. æœ‰äº› PointMarker åœ¨ AreaMarker ä¸‹ï¼ˆæ‰¹é‡ç”Ÿæˆï¼‰ï¼Œæœ‰äº›ç‹¬ç«‹å­˜åœ¨ï¼ˆæ‰‹åŠ¨æ”¾ç½®ï¼‰
4. æ ‡æ³¨ä¿¡æ¯å±äº **SceneView å±‚**ï¼ˆç©ºé—´æ ‡æ³¨ï¼‰ï¼Œä¸å±äº Blueprint å±‚ï¼ˆè¿è¡Œæ—¶é€»è¾‘ï¼‰

### 1.3 è®¾è®¡çº¦æŸ

æ¥è‡ª [SceneBlueprintæ ¸å¿ƒè®¾è®¡åŸåˆ™](SceneBlueprintæ ¸å¿ƒè®¾è®¡åŸåˆ™.md)ï¼š

| çº¦æŸ | æ¥æº |
|------|------|
| Marker åªæè¿°"æ˜¯ä»€ä¹ˆ"ï¼Œä¸æè¿°"åšä»€ä¹ˆ" | Â§1.2 èŒè´£åˆ†ç¦» |
| Blueprint åªå¼•ç”¨ Marker IDï¼Œä¸å­˜å‚¨é…ç½®æ•°æ® | Â§1.3 å•å‘æ•°æ®æµ |
| åŒä¸€ä¸ª Marker å¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹å¼•ç”¨ | Â§2.1 æ ‡è®°ä¸èŠ‚ç‚¹å…³ç³» |
| Marker ä¸­ä¸å­˜å‚¨å¤æ‚é€»è¾‘é…ç½® | Â§3.3 åæ¨¡å¼ 2 |

### 1.4 å…³é”®æ´å¯Ÿ

åŒºåˆ†ä¸‰ç§æ•°æ®ï¼š

```
ç©ºé—´æ•°æ®ï¼ˆSceneView å±‚ï¼‰ï¼šposition, rotation, åŒºåŸŸå½¢çŠ¶
æ ‡æ³¨æ•°æ®ï¼ˆSceneView å±‚ï¼‰ï¼šmonsterId, level, behavior, cameraFOV
é€»è¾‘æ•°æ®ï¼ˆBlueprint å±‚ï¼‰ï¼šæ—¶åºã€æ¡ä»¶ã€è¿çº¿å…³ç³»
```

**"è¿™ä¸ªç‚¹ä½æ”¾éª·é«…æˆ˜å£«"æ˜¯æ ‡æ³¨æ•°æ®**â€”â€”ç­–åˆ’åœ¨åœºæ™¯ä¸­åšçš„ç©ºé—´æ ‡æ³¨ï¼Œå’Œ"è¿™ä¸ªåŒºåŸŸå« Boss æˆ¿é—´"æ˜¯åŒä¸€å±‚æ¬¡ã€‚å®ƒä¸æ˜¯è¿è¡Œæ—¶é€»è¾‘ã€‚

---

## äºŒã€æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 2.1 ç»„ä»¶åŒ–æ ‡æ³¨ï¼ˆè·¯å¾„ Cï¼‰

é‡‡ç”¨ Unity ç»„ä»¶åŒ–æ–¹å¼ï¼šé€šè¿‡é¢å¤–çš„ MonoBehaviour ç»„ä»¶é™„åŠ æ ‡æ³¨æ•°æ®ã€‚

```
PointMarkerï¼ˆç©ºé—´ï¼‰     +  SpawnAnnotationï¼ˆæ ‡æ³¨ï¼‰     = åˆ·æ€ªç‚¹
PointMarkerï¼ˆç©ºé—´ï¼‰     +  CameraAnnotationï¼ˆæ ‡æ³¨ï¼‰    = ç›¸æœºæœºä½
PointMarkerï¼ˆç©ºé—´ï¼‰     +  SpawnAnnotation + CameraAnnotation = åˆ·æ€ªç‚¹ + ç›¸æœºæœºä½
PointMarkerï¼ˆç©ºé—´ï¼‰     +  ï¼ˆæ— æ ‡æ³¨ï¼‰                   = çº¯ç©ºé—´ç‚¹
```

### 2.2 è®¾è®¡ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| **Marker ä¿æŒçº¯å‡€** | PointMarker åªæœ‰ position/rotationï¼Œæ˜¯çº¯ç©ºé—´æ ‡è®° |
| **æ ‡æ³¨é€šè¿‡ç»„ä»¶é™„åŠ ** | ç¬¦åˆ Unity ç»„ä»¶åŒ–è®¾è®¡ï¼ŒInspector å¤©ç„¶æ”¯æŒ |
| **ä¸€ç‚¹å¤šç”¨** | åŒä¸€ Marker æŒ‚ä¸åŒç»„ä»¶ï¼Œè¢«ä¸åŒèŠ‚ç‚¹å¼•ç”¨ |
| **Blueprint ä¿æŒçº¯å‡€** | åªå¼•ç”¨ Marker IDï¼Œä¸å­˜å‚¨é…ç½®æ•°æ® |
| **å¯¼å‡ºæ—¶åˆå¹¶** | ç©ºé—´æ•°æ® + æ ‡æ³¨æ•°æ® â†’ Playbook æ¡ç›® |
| **é›¶é¢å¤– UI å¼€å‘** | æ ‡æ³¨ç»„ä»¶çš„ Inspector ç”± Unity è‡ªåŠ¨ç”Ÿæˆ |

### 2.3 ä¸ç°æœ‰æ¨¡å¼çš„ä¸€è‡´æ€§

æ²¿ç”¨é¡¹ç›®ä¸­å·²æœ‰çš„**æ¥å£ + Attribute + AutoDiscover æ³¨å†Œè¡¨**æ¨¡å¼ï¼š

| å·²æœ‰ç³»ç»Ÿ | æ¥å£ | Attribute | æ³¨å†Œè¡¨ |
|---------|------|-----------|--------|
| Action ç±»å‹ | `IActionDefinitionProvider` | `[ActionType]` | `ActionRegistry` |
| Marker ç±»å‹ | `IMarkerDefinitionProvider` | `[MarkerDef]` | `MarkerDefinitionRegistry` |
| Marker æ¸²æŸ“ | `IMarkerGizmoRenderer` | â€” | `GizmoRenderPipeline` |
| **æ ‡æ³¨ç±»å‹ï¼ˆæ–°å¢ï¼‰** | `IAnnotationDefinitionProvider` | `[AnnotationDef]` | `AnnotationDefinitionRegistry` |

---

## ä¸‰ã€æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SceneView å±‚                            â”‚
â”‚                                                              â”‚
â”‚  SceneMarkerï¼ˆç©ºé—´ï¼‰          MarkerAnnotationï¼ˆæ ‡æ³¨ï¼‰        â”‚
â”‚  â”œâ”€ PointMarker               â”œâ”€ SpawnAnnotation             â”‚
â”‚  â”œâ”€ AreaMarker                â”œâ”€ CameraAnnotation            â”‚
â”‚  â””â”€ EntityMarker              â””â”€ PatrolAnnotation            â”‚
â”‚                                                              â”‚
â”‚  å…³ç³»ï¼šAnnotation æŒ‚åœ¨ Marker çš„ GameObject ä¸Š               â”‚
â”‚  çº¦æŸï¼š[RequireComponent(typeof(SceneMarker))]               â”‚
â”‚  ç‰¹æ€§ï¼šä¸€ä¸ª Marker å¯æŒ‚å¤šç§ Annotation                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ AnnotationDefinitionRegistryï¼ˆç¼–è¾‘å™¨å±‚ï¼‰          â”‚       â”‚
â”‚  â”‚  AutoDiscover â†’ æ³¨å†Œæ‰€æœ‰ AnnotationDefinition    â”‚       â”‚
â”‚  â”‚  æä¾›ï¼šé€‚ç”¨æ€§æŸ¥è¯¢ã€Inspector UI é©±åŠ¨              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ GizmoRenderPipelineï¼ˆDecoration é˜¶æ®µï¼‰            â”‚       â”‚
â”‚  â”‚  éå† Marker ä¸Šçš„ Annotation                      â”‚       â”‚
â”‚  â”‚  è°ƒç”¨ DrawGizmoDecoration / GetGizmoColorOverride â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ SceneBindingï¼ˆMarkerId åªè¯»å¼•ç”¨ï¼‰
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Blueprint å±‚                            â”‚
â”‚                                                              â”‚
â”‚  èŠ‚ç‚¹åªå¼•ç”¨ Markerï¼Œä¸çŸ¥é“ Annotation çš„å­˜åœ¨                  â”‚
â”‚                                                              â”‚
â”‚  [Trigger.EnterArea] â”€â”€â†’ [Spawn.Preset] â”€â”€â†’ [åç»­]          â”‚
â”‚                               â”‚                              â”‚
â”‚                               â”œâ”€ spawnArea: AreaMarker       â”‚
â”‚                               â””â”€ spawnPoints: PointMarker[]  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ å¯¼å‡º
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¯¼å‡ºå±‚                                   â”‚
â”‚                                                              â”‚
â”‚  BlueprintExporter:                                          â”‚
â”‚    1. è¯»å–èŠ‚ç‚¹ç»‘å®šçš„ Marker                                   â”‚
â”‚    2. æ”¶é›†å…³è”çš„ PointMarkerï¼ˆAreaMarker å­ç‰©ä½“ + ç›´æ¥ç»‘å®šï¼‰  â”‚
â”‚    3. è°ƒç”¨æ¯ä¸ª PointMarker ä¸Šçš„ Annotation.CollectExportData  â”‚
â”‚    4. åˆå¹¶ç©ºé—´æ•°æ® + æ ‡æ³¨æ•°æ® â†’ Playbook æ¡ç›®                 â”‚
â”‚    5. æ—  Annotation æ—¶æ‰“å°æ—¥å¿—ï¼Œå›é€€åˆ°èŠ‚ç‚¹å…¨å±€é…ç½®             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€è¿è¡Œæ—¶å±‚ï¼šMarkerAnnotation åŸºç±»

### 4.1 åŸºç±»è®¾è®¡

```csharp
// Runtime/Markers/Annotations/MarkerAnnotation.cs

/// <summary>
/// æ ‡è®°æ ‡æ³¨ç»„ä»¶åŸºç±» â€” é™„åŠ åœ¨ SceneMarker çš„ GameObject ä¸Šï¼Œ
/// ä¸ºç©ºé—´æ ‡è®°æä¾›é¢å¤–çš„è¯­ä¹‰å±æ€§ã€‚
///
/// è®¾è®¡åŸåˆ™ï¼š
/// - Marker æ˜¯çº¯ç©ºé—´æ ‡è®°ï¼ˆposition/rotation/shapeï¼‰
/// - Annotation æ˜¯ç©ºé—´æ ‡æ³¨ï¼ˆmonsterId/behavior/cameraFOVï¼‰
/// - ä¸¤è€…éƒ½å±äº SceneView å±‚ï¼Œä¸æ˜¯ Blueprint å±‚
/// - ä¸€ä¸ª Marker å¯ä»¥æŒ‚å¤šä¸ªä¸åŒç±»å‹çš„ Annotation
/// - å¯¼å‡ºæ—¶ï¼ŒAnnotation æ•°æ®å’Œ Marker ç©ºé—´æ•°æ®åˆå¹¶å†™å…¥ Playbook
/// </summary>
[RequireComponent(typeof(SceneMarker))]
public abstract class MarkerAnnotation : MonoBehaviour
{
    /// <summary>æ ‡æ³¨ç±»å‹ IDï¼ˆå¦‚ "Spawn", "Camera", "Patrol"ï¼‰</summary>
    public abstract string AnnotationTypeId { get; }

    /// <summary>
    /// æ”¶é›†å¯¼å‡ºæ•°æ® â€” å¯¼å‡ºå™¨è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå°†æ ‡æ³¨å±æ€§å†™å…¥å­—å…¸ã€‚
    /// key æ˜¯å±æ€§åï¼Œvalue æ˜¯å¯åºåˆ—åŒ–çš„å€¼ã€‚
    /// </summary>
    public abstract void CollectExportData(IDictionary<string, object> data);

    /// <summary>è·å–æ‰€åœ¨çš„ SceneMarkerï¼ˆç¼“å­˜ï¼‰</summary>
    public SceneMarker Marker => _marker ??= GetComponent<SceneMarker>();
    private SceneMarker _marker;

    // â”€â”€ Gizmo è£…é¥°ï¼ˆå¯é€‰è¦†ç›–ï¼‰â”€â”€

    /// <summary>
    /// æ˜¯å¦æä¾›è‡ªå®šä¹‰ Gizmo è£…é¥°ã€‚
    /// è¿”å› true æ—¶ï¼Œç®¡çº¿ä¼šåœ¨ Marker åŸºç¡€ Gizmo ä¹‹ä¸Šè°ƒç”¨ DrawGizmoDecorationã€‚
    /// </summary>
    public virtual bool HasGizmoDecoration => false;

    /// <summary>
    /// ç»˜åˆ¶ Gizmo è£…é¥°ã€‚åœ¨ Marker çš„åŸºç¡€ Gizmoï¼ˆçƒä½“/ç®­å¤´ï¼‰ä¹‹åè°ƒç”¨ã€‚
    /// ä»…åœ¨ç¼–è¾‘å™¨ä¸­æœ‰æ•ˆï¼ˆæ–¹æ³•ä½“ç”± Editor å±‚çš„ partial æˆ–æ¡ä»¶ç¼–è¯‘æä¾›ï¼‰ã€‚
    /// </summary>
    public virtual void DrawGizmoDecoration(bool isSelected) { }

    /// <summary>
    /// è¦†ç›– Marker çš„ Gizmo é¢œè‰²ã€‚è¿”å› null è¡¨ç¤ºä¸è¦†ç›–ã€‚
    /// </summary>
    public virtual Color? GetGizmoColorOverride() => null;
}
```

**å…³é”®è®¾è®¡å†³ç­–**ï¼š

- `[RequireComponent(typeof(SceneMarker))]`ï¼šç¼–è¯‘æœŸä¿è¯æ ‡æ³¨ç»„ä»¶å¿…é¡»æŒ‚åœ¨æœ‰ SceneMarker çš„ GameObject ä¸Š
- `CollectExportData(IDictionary<string, object>)`ï¼šæ ‡æ³¨ç»„ä»¶è‡ªå·±çŸ¥é“æ€ä¹ˆå¯¼å‡ºï¼Œå¯¼å‡ºå™¨ä¸éœ€è¦çŸ¥é“æ¯ç§æ ‡æ³¨çš„å…·ä½“å­—æ®µ
- Gizmo æ–¹æ³•æ˜¯ `virtual`ï¼Œé»˜è®¤ç©ºå®ç°ï¼Œå…·ä½“æ ‡æ³¨æŒ‰éœ€è¦†ç›–
- åŸºç±»åœ¨ **Runtime å±‚**ï¼ˆå› ä¸º SceneMarker åœ¨ Runtime å±‚ï¼Œæ ‡æ³¨ç»„ä»¶éšåœºæ™¯åºåˆ—åŒ–ï¼‰

### 4.2 å…·ä½“æ ‡æ³¨ç»„ä»¶

#### SpawnAnnotationï¼ˆåˆ·æ€ªç‚¹æ ‡æ³¨ï¼‰

```csharp
// Runtime/Markers/Annotations/SpawnAnnotation.cs

/// <summary>
/// åˆ·æ€ªç‚¹æ ‡æ³¨ â€” æ ‡è®°è¯¥ä½ç½®è¦ç”Ÿæˆä»€ä¹ˆæ€ªç‰©ã€‚
/// æŒ‚åœ¨ PointMarker ä¸Šï¼Œé…åˆ Spawn.Preset èŠ‚ç‚¹ä½¿ç”¨ã€‚
/// </summary>
public class SpawnAnnotation : MarkerAnnotation
{
    public override string AnnotationTypeId => "Spawn";

    [Header("æ€ªç‰©é…ç½®")]
    [Tooltip("æ€ªç‰©æ¨¡æ¿ IDï¼ˆå¯¹åº”è¿è¡Œæ—¶çš„æ€ªç‰©è¡¨ï¼‰")]
    public string MonsterId = "";

    [Tooltip("æ€ªç‰©ç­‰çº§")]
    [Range(1, 100)]
    public int Level = 1;

    [Header("åˆå§‹è¡Œä¸º")]
    [Tooltip("ç”Ÿæˆåçš„åˆå§‹è¡Œä¸º")]
    public InitialBehavior Behavior = InitialBehavior.Idle;

    [Tooltip("è­¦æˆ’åŠå¾„ï¼ˆGuard æ¨¡å¼ä¸‹ç”Ÿæ•ˆï¼‰")]
    public float GuardRadius = 5f;

    public override void CollectExportData(IDictionary<string, object> data)
    {
        data["monsterId"] = MonsterId;
        data["level"] = Level;
        data["behavior"] = Behavior.ToString();
        if (Behavior == InitialBehavior.Guard)
            data["guardRadius"] = GuardRadius;
    }

    // â”€â”€ Gizmo â”€â”€

    public override bool HasGizmoDecoration => true;

    public override void DrawGizmoDecoration(bool isSelected)
    {
        // åœ¨ PointMarker ä¸Šæ–¹ç”»æ€ªç‰© ID æ ‡ç­¾
        if (!string.IsNullOrEmpty(MonsterId))
        {
            var pos = transform.position + Vector3.up * 1.2f;
            var label = $"{MonsterId} Lv.{Level}";
            // ä½¿ç”¨ GizmoLabelUtilï¼ˆç¼–è¾‘å™¨å±‚è°ƒç”¨ï¼‰
        }

        // Guard æ¨¡å¼ç”»è­¦æˆ’èŒƒå›´
        if (Behavior == InitialBehavior.Guard)
        {
            // ç”»åŠé€æ˜åœ†ç›˜
        }
    }

    public override Color? GetGizmoColorOverride()
    {
        return string.IsNullOrEmpty(MonsterId)
            ? null
            : new Color(0.9f, 0.2f, 0.2f); // æœ‰æ€ªç‰©é…ç½®çš„ç‚¹ä½ç”¨çº¢è‰²
    }
}

public enum InitialBehavior { Idle, Patrol, Guard, Ambush }
```

#### CameraAnnotationï¼ˆç›¸æœºç‚¹æ ‡æ³¨ï¼‰

```csharp
// Runtime/Markers/Annotations/CameraAnnotation.cs

public class CameraAnnotation : MarkerAnnotation
{
    public override string AnnotationTypeId => "Camera";

    public float FOV = 60f;
    public float TransitionDuration = 1.5f;
    public string Easing = "EaseInOut";

    public override void CollectExportData(IDictionary<string, object> data)
    {
        data["fov"] = FOV;
        data["transitionDuration"] = TransitionDuration;
        data["easing"] = Easing;
    }

    public override bool HasGizmoDecoration => true;

    public override void DrawGizmoDecoration(bool isSelected)
    {
        // ç”»ç›¸æœºè§†é”¥çº¿æ¡†
    }

    public override Color? GetGizmoColorOverride()
    {
        return new Color(0.3f, 0.8f, 0.3f); // ç›¸æœºç‚¹ç”¨ç»¿è‰²
    }
}
```

### 4.3 ç»„ä»¶å…±å­˜è§„åˆ™

| è§„åˆ™ | è¯´æ˜ |
|------|------|
| ä¸€ä¸ª Marker å¯æŒ‚å¤šç§ä¸åŒç±»å‹çš„ Annotation | SpawnAnnotation + CameraAnnotation å¯å…±å­˜ |
| åŒç±»å‹ Annotation æ˜¯å¦å…è®¸å¤šä¸ª | ç”± `AnnotationDefinition.AllowMultiple` æ§åˆ¶ |
| æ—  Annotation çš„ Marker | å®Œå…¨åˆæ³•ï¼Œæ˜¯çº¯ç©ºé—´æ ‡è®° |
| Annotation ä¸èƒ½è„±ç¦» Marker å­˜åœ¨ | `[RequireComponent]` ä¿è¯ |

---

## äº”ã€ç¼–è¾‘å™¨å±‚ï¼šæ ‡æ³¨å®šä¹‰æ³¨å†Œè¡¨

### 5.1 AnnotationDefinition

```csharp
// Editor/Markers/Annotations/AnnotationDefinition.cs

/// <summary>
/// æ ‡æ³¨ç±»å‹å®šä¹‰ â€” æè¿°ä¸€ç§æ ‡æ³¨"æ˜¯ä»€ä¹ˆã€é€‚ç”¨äºä»€ä¹ˆ Markerã€æœ‰ä»€ä¹ˆé»˜è®¤å€¼"ã€‚
/// ç”¨äºé©±åŠ¨ç¼–è¾‘å™¨ UIï¼ˆAdd Component èœå•è¿‡æ»¤ã€Inspector æç¤ºç­‰ï¼‰ã€‚
/// </summary>
public class AnnotationDefinition
{
    /// <summary>æ ‡æ³¨ç±»å‹ IDï¼ˆå¦‚ "Spawn", "Camera"ï¼‰ï¼Œå¯¹åº” MarkerAnnotation.AnnotationTypeId</summary>
    public string TypeId;

    /// <summary>ç¼–è¾‘å™¨æ˜¾ç¤ºåï¼ˆå¦‚ "åˆ·æ€ªç‚¹æ ‡æ³¨"ï¼‰</summary>
    public string DisplayName;

    /// <summary>æè¿°æ–‡æœ¬</summary>
    public string Description;

    /// <summary>å¯¹åº”çš„ MonoBehaviour ç»„ä»¶ç±»å‹</summary>
    public Type ComponentType;

    /// <summary>
    /// é€‚ç”¨çš„ Marker ç±»å‹ ID åˆ—è¡¨ã€‚
    /// null æˆ–ç©ºæ•°ç»„è¡¨ç¤ºé€‚ç”¨æ‰€æœ‰ Marker ç±»å‹ã€‚
    /// </summary>
    public string[] ApplicableMarkerTypes;

    /// <summary>æ˜¯å¦å…è®¸åŒä¸€ Marker ä¸ŠæŒ‚å¤šä¸ªåŒç±»æ ‡æ³¨</summary>
    public bool AllowMultiple;

    /// <summary>å…³è”çš„ Tag å‰ç¼€ï¼ˆç”¨äºå›¾å±‚ç³»ç»Ÿé›†æˆï¼‰</summary>
    public string TagPrefix;
}
```

```csharp
// Editor/Markers/Annotations/IAnnotationDefinitionProvider.cs

[AttributeUsage(AttributeTargets.Class, AllowMultiple = false, Inherited = false)]
public class AnnotationDefAttribute : Attribute
{
    public string TypeId { get; }
    public AnnotationDefAttribute(string typeId) { TypeId = typeId; }
}

public interface IAnnotationDefinitionProvider
{
    AnnotationDefinition Define();
}
```

å…·ä½“å®šä¹‰ç¤ºä¾‹ï¼š

```csharp
// Editor/Markers/Annotations/Definitions/SpawnAnnotationDef.cs

[AnnotationDef("Spawn")]
public class SpawnAnnotationDef : IAnnotationDefinitionProvider
{
    public AnnotationDefinition Define() => new AnnotationDefinition
    {
        TypeId = "Spawn",
        DisplayName = "åˆ·æ€ªç‚¹æ ‡æ³¨",
        Description = "æ ‡è®°è¯¥ä½ç½®è¦ç”Ÿæˆçš„æ€ªç‰©åŠå…¶åˆå§‹è¡Œä¸º",
        ComponentType = typeof(SpawnAnnotation),
        ApplicableMarkerTypes = new[] { MarkerTypeIds.Point },
        AllowMultiple = false,
        TagPrefix = "Combat"
    };
}
```

### 5.2 AutoDiscover æ³¨å†Œè¡¨

```csharp
// Editor/Markers/Annotations/AnnotationDefinitionRegistry.cs

/// <summary>
/// æ ‡æ³¨å®šä¹‰æ³¨å†Œè¡¨ â€” è‡ªåŠ¨æ‰«ææ‰€æœ‰ [AnnotationDef] æ ‡æ³¨çš„ Providerã€‚
/// ä¸ MarkerDefinitionRegistryã€ActionRegistry æ¨¡å¼ä¸€è‡´ã€‚
/// </summary>
public static class AnnotationDefinitionRegistry
{
    private static Dictionary<string, AnnotationDefinition> _definitions;
    private static bool _initialized;

    /// <summary>åå°„è‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œæ‰€æœ‰æ ‡æ³¨å®šä¹‰</summary>
    public static void AutoDiscover();

    /// <summary>é€šè¿‡ TypeId è·å–æ ‡æ³¨å®šä¹‰</summary>
    public static AnnotationDefinition Get(string typeId);

    /// <summary>è·å–æ‰€æœ‰å·²æ³¨å†Œçš„æ ‡æ³¨å®šä¹‰</summary>
    public static IReadOnlyList<AnnotationDefinition> GetAll();

    /// <summary>è·å–é€‚ç”¨äºæŒ‡å®š Marker ç±»å‹çš„æ‰€æœ‰æ ‡æ³¨å®šä¹‰</summary>
    public static IReadOnlyList<AnnotationDefinition> GetApplicable(string markerTypeId);
}
```

**æ‰©å±•æ–°æ ‡æ³¨ç±»å‹çš„æˆæœ¬**ï¼ˆé›¶æ¥è§¦å·²æœ‰æ–‡ä»¶ï¼‰ï¼š

```
æ–°å¢"å®ç®±æ ‡æ³¨"ï¼š
1. Runtime/Markers/Annotations/TreasureAnnotation.cs        ï¼ˆ~30è¡Œï¼ŒMonoBehaviourï¼‰
2. Editor/Markers/Annotations/Definitions/TreasureAnnotationDef.cs  ï¼ˆ~20è¡Œï¼ŒProviderï¼‰
â”â” å®Œæˆï¼ŒAutoDiscover è‡ªåŠ¨æ³¨å†Œ â”â”
```

---

## å…­ã€Gizmo é›†æˆ

### 6.1 Decoration é˜¶æ®µ

åœ¨ç°æœ‰ GizmoRenderPipeline çš„é˜¶æ®µåºåˆ—ä¸­æ–°å¢ **Decoration é˜¶æ®µ**ï¼š

```
GizmoRenderPipeline é˜¶æ®µåºåˆ—ï¼š
  1. Fill          â† Marker åŸºç¡€æ¸²æŸ“ï¼ˆå®å¿ƒçƒ/åŠé€æ˜åŒºåŸŸï¼‰
  2. Wireframe     â† Marker çº¿æ¡†
  3. Interactive   â† ç¼–è¾‘ Handleï¼ˆBox/Polygonï¼‰
  4. Label         â† æ–‡å­—æ ‡ç­¾
  5. Decoration    â† ã€æ–°å¢ã€‘Annotation è£…é¥°å±‚
  6. Highlight     â† é€‰ä¸­é«˜äº®
```

```csharp
// GizmoRenderPipeline ä¸­æ–°å¢
private static void ExecuteDecorationPhase()
{
    foreach (var ctx in _drawList)
    {
        var annotations = MarkerCache.GetAnnotations(ctx.Marker);
        foreach (var annotation in annotations)
        {
            if (annotation.HasGizmoDecoration)
            {
                annotation.DrawGizmoDecoration(ctx.IsSelected);
            }
        }
    }
}
```

### 6.2 é¢œè‰²è¦†ç›–ä¼˜å…ˆçº§

```
é¢œè‰²ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
  1. Marker.UseCustomGizmoColor â†’ Marker.CustomGizmoColor    ï¼ˆç”¨æˆ·æ‰‹åŠ¨æŒ‡å®šï¼‰
  2. Annotation.GetGizmoColorOverride()                       ï¼ˆæ ‡æ³¨è¦†ç›–ï¼‰ã€æ–°å¢ã€‘
  3. GizmoStyleConstants.GetLayerColor(tag)                   ï¼ˆå›¾å±‚è‰²ï¼‰
  4. é»˜è®¤è‰²
```

åœ¨ `GizmoStyleConstants.GetMarkerColor` ä¸­æ’å…¥ Annotation é¢œè‰²æŸ¥è¯¢ï¼š

```csharp
public static Color GetMarkerColor(SceneMarker marker)
{
    // 1. ç”¨æˆ·è‡ªå®šä¹‰è‰²
    if (marker.UseCustomGizmoColor)
        return marker.CustomGizmoColor;

    // 2. Annotation è¦†ç›–è‰²ï¼ˆå–ç¬¬ä¸€ä¸ªé null çš„ï¼‰
    var annotations = MarkerCache.GetAnnotations(marker);
    foreach (var ann in annotations)
    {
        var colorOverride = ann.GetGizmoColorOverride();
        if (colorOverride.HasValue)
            return colorOverride.Value;
    }

    // 3. å›¾å±‚è‰²
    return GetLayerColor(marker.Tag);
}
```

### 6.3 MarkerCache ç¼“å­˜æ‰©å±•

é¿å…æ¯å¸§ `GetComponents<MarkerAnnotation>()` çš„ GC å¼€é”€ï¼š

```csharp
// MarkerCache æ‰©å±•
public static class MarkerCache
{
    // ç°æœ‰
    private static SceneMarker[] _markers;

    // æ–°å¢ï¼šAnnotation ç¼“å­˜
    private static Dictionary<SceneMarker, MarkerAnnotation[]> _annotationCache;

    /// <summary>è·å– Marker ä¸Šçš„æ‰€æœ‰ Annotationï¼ˆä»ç¼“å­˜è¯»å–ï¼Œé›¶ GCï¼‰</summary>
    public static MarkerAnnotation[] GetAnnotations(SceneMarker marker)
    {
        EnsureValid();
        if (_annotationCache != null && _annotationCache.TryGetValue(marker, out var annotations))
            return annotations;
        return Array.Empty<MarkerAnnotation>();
    }

    // åœ¨ Rebuild() ä¸­åŒæ—¶æ„å»º Annotation ç¼“å­˜
    private static void Rebuild()
    {
        _markers = FindObjectsOfType<SceneMarker>();
        _annotationCache = new Dictionary<SceneMarker, MarkerAnnotation[]>();
        foreach (var marker in _markers)
        {
            var annotations = marker.GetComponents<MarkerAnnotation>();
            if (annotations.Length > 0)
                _annotationCache[marker] = annotations;
        }
    }
}
```

ç¼“å­˜éš `EditorApplication.hierarchyChanged` è‡ªåŠ¨å¤±æ•ˆï¼Œä¸ç°æœ‰æœºåˆ¶ä¸€è‡´ã€‚

---

## ä¸ƒã€Blueprint èŠ‚ç‚¹ç»‘å®šä¸å¯¼å‡º

### 7.1 Spawn.Preset çš„åŒç»‘å®šæ§½è®¾è®¡

`Spawn.Preset` æ”¯æŒä¸¤ç§ç»‘å®šæºï¼Œç­–åˆ’æŒ‰éœ€é€‰æ‹©ï¼š

```csharp
// SpawnPresetDef.cs ä¿®æ”¹å
SceneRequirements = new[]
{
    // æ–¹å¼ 1ï¼šç»‘å®šåŒºåŸŸï¼ˆè‡ªåŠ¨æ”¶é›†å­ PointMarkerï¼‰
    new MarkerRequirement("spawnArea", MarkerTypeIds.Area,
        displayName: "åˆ·æ€ªåŒºåŸŸ",
        defaultTag: "Combat.SpawnArea",
        required: false),

    // æ–¹å¼ 2ï¼šç›´æ¥ç»‘å®šç‚¹ä½
    new MarkerRequirement("spawnPoints", MarkerTypeIds.Point,
        displayName: "åˆ·æ€ªç‚¹ä½",
        allowMultiple: true,
        defaultTag: "Combat.SpawnPoint",
        required: false),
}
// éªŒè¯è§„åˆ™ï¼šspawnArea å’Œ spawnPoints è‡³å°‘æœ‰ä¸€ä¸ªéç©º
```

**ç­–åˆ’çš„ä¸¤ç§æ“ä½œè·¯å¾„**ï¼š

```
è·¯å¾„ Aï¼ˆæœ‰åŒºåŸŸï¼Œæ‰¹é‡ç”Ÿæˆï¼‰ï¼š
  1. åˆ›å»º AreaMarker â†’ ä½ç½®ç”Ÿæˆå·¥å…· â†’ [éšæœºç”Ÿæˆ] â†’ å­ PointMarker
  2. Blueprint ä¸­ Spawn.Preset ç»‘å®š AreaMarker
  3. å¯¼å‡ºæ—¶è‡ªåŠ¨æ”¶é›†å­ PointMarker + Annotation

è·¯å¾„ Bï¼ˆæ— åŒºåŸŸï¼Œæ‰‹åŠ¨æ”¾ç½®ï¼‰ï¼š
  1. æ‰‹åŠ¨æ”¾ç½®è‹¥å¹²ç‹¬ç«‹ PointMarker
  2. Blueprint ä¸­ Spawn.Preset ç›´æ¥ç»‘å®šè¿™äº› PointMarker
  3. å¯¼å‡ºæ—¶ç›´æ¥ä½¿ç”¨

è·¯å¾„ Cï¼ˆæ··åˆï¼‰ï¼š
  1. ç»‘å®šä¸€ä¸ª AreaMarkerï¼ˆæ‰¹é‡ç‚¹ä½ï¼‰+ å‡ ä¸ªç‹¬ç«‹ PointMarkerï¼ˆæ‰‹åŠ¨è¡¥å……ï¼‰
  2. å¯¼å‡ºæ—¶åˆå¹¶ä¸¤ä¸ªæ¥æº
```

### 7.2 å¯¼å‡ºå™¨æ”¶é›†é€»è¾‘

```csharp
/// <summary>
/// ç»Ÿä¸€æ”¶é›† Spawn.Preset èŠ‚ç‚¹å…³è”çš„æ‰€æœ‰ PointMarkerã€‚
/// æ”¯æŒ AreaMarker å­ç‚¹ä½ + ç›´æ¥ç»‘å®šç‚¹ä½ä¸¤ç§æ¥æºã€‚
/// </summary>
List<PointMarker> ResolveSpawnPoints(ActionNodeData node)
{
    var result = new List<PointMarker>();

    // æ¥æº 1ï¼šä» AreaMarker æ”¶é›†å­ç‚¹ä½
    if (TryGetBinding("spawnArea", out AreaMarker areaMarker))
    {
        foreach (Transform child in areaMarker.transform)
        {
            var pm = child.GetComponent<PointMarker>();
            if (pm != null) result.Add(pm);
        }
    }

    // æ¥æº 2ï¼šç›´æ¥ç»‘å®šçš„ç‚¹ä½
    if (TryGetBindings("spawnPoints", out List<PointMarker> directPoints))
    {
        result.AddRange(directPoints);
    }

    return result;
}
```

å¯¼å‡ºæ¯ä¸ª PointMarker æ—¶æ”¶é›† Annotation æ•°æ®ï¼š

```csharp
foreach (var pm in resolvedPoints)
{
    var entry = new Dictionary<string, object>
    {
        ["position"] = pm.transform.position,
        ["rotation"] = pm.transform.rotation.eulerAngles
    };

    // æ”¶é›†æ‰€æœ‰ Annotation æ•°æ®
    var annotations = pm.GetComponents<MarkerAnnotation>();
    foreach (var annotation in annotations)
    {
        var annotationData = new Dictionary<string, object>();
        annotation.CollectExportData(annotationData);
        entry[annotation.AnnotationTypeId] = annotationData;
    }

    // æ—  SpawnAnnotation æ—¶æ‰“å°æ—¥å¿—
    if (pm.GetComponent<SpawnAnnotation>() == null)
    {
        Debug.Log($"[å¯¼å‡º] PointMarker '{pm.MarkerName}' æ²¡æœ‰ SpawnAnnotationï¼Œ" +
                  $"å°†ä½¿ç”¨èŠ‚ç‚¹å…¨å±€é…ç½®");
    }

    entries.Add(entry);
}
```

### 7.3 å¯¼å‡ºæ•°æ®ä¼˜å…ˆçº§

```
ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
  1. PointMarker ä¸Šçš„ SpawnAnnotation å±æ€§    ï¼ˆé€ç‚¹é…ç½®ï¼‰
  2. Spawn.Preset èŠ‚ç‚¹çš„å…¨å±€å±æ€§              ï¼ˆå…¨å±€é…ç½®ï¼‰
  3. é»˜è®¤å€¼                                   ï¼ˆå…œåº•ï¼‰
```

**å…¸å‹åœºæ™¯**ï¼š

| åœºæ™¯ | é…ç½®æ–¹å¼ |
|------|---------|
| æ‰€æœ‰ç‚¹ä½æ”¾åŒä¸€ç§æ€ª | ä¸åŠ  SpawnAnnotationï¼Œç”¨èŠ‚ç‚¹å…¨å±€æ€ªç‰©æ¨¡æ¿ |
| ä¸åŒç‚¹ä½æ”¾ä¸åŒæ€ª | æ¯ä¸ª PointMarker åŠ  SpawnAnnotation |
| å¤§éƒ¨åˆ†ç›¸åŒï¼Œä¸ªåˆ«ç‰¹æ®Š | å…¨å±€é…ç½® + ä¸ªåˆ«ç‚¹ä½åŠ  SpawnAnnotation è¦†ç›– |

---

## å…«ã€ä½ç½®ç”Ÿæˆå·¥å…·é›†æˆ

ä½ç½®ç”Ÿæˆå·¥å…·ï¼ˆAreaMarkerEditorï¼‰ç”Ÿæˆ PointMarker æ—¶ï¼Œå¯é€‰åœ°æ‰¹é‡æ·»åŠ æ ‡æ³¨ç»„ä»¶ï¼š

```
AreaMarkerEditor Inspector é¢æ¿ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½ç½®ç”Ÿæˆå·¥å…·                 â”‚
â”‚                             â”‚
â”‚ ç”Ÿæˆç­–ç•¥: [éšæœº â–¼]          â”‚
â”‚ æ•°é‡: [5]                   â”‚
â”‚ æœ€å°é—´è·: [2.0]             â”‚
â”‚                             â”‚
â”‚ â˜‘ è‡ªåŠ¨æ·»åŠ æ ‡æ³¨: [Spawn â–¼]  â”‚  â† å¯é€‰
â”‚                             â”‚
â”‚ [éšæœºç”Ÿæˆ]                   â”‚
â”‚                             â”‚
â”‚ å·²æœ‰ 5 ä¸ªå­ PointMarker     â”‚
â”‚ [æ¸…é™¤å…¨éƒ¨å­ç‚¹ä½]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ç”Ÿæˆé€»è¾‘æ‰©å±•ï¼š

```csharp
// AreaMarkerEditor.GeneratePointMarkers() ä¸­
if (_autoAddAnnotation)
{
    var annotationType = AnnotationDefinitionRegistry.Get(_selectedAnnotationType);
    if (annotationType != null)
    {
        var component = go.AddComponent(annotationType.ComponentType);
        Undo.RegisterCreatedObjectUndo(component, "æ·»åŠ æ ‡æ³¨");
    }
}
```

---

## ä¹ã€ç­–åˆ’å®Œæ•´å·¥ä½œæµ

### 9.1 é¢„è®¾åˆ·æ€ªï¼ˆè·¯å¾„ Aï¼šæœ‰åŒºåŸŸï¼‰

```
ç¬¬1æ­¥ï¼šSceneView ä¸­å¸ƒç½®ç©ºé—´
  é€‰ä¸­ AreaMarker â†’ Inspector å±•å¼€"ä½ç½®ç”Ÿæˆå·¥å…·"
  â†’ è®¾ç½®ç­–ç•¥/æ•°é‡/é—´è· â†’ [éšæœºç”Ÿæˆ]
  â†’ Hierarchy ä¸­å‡ºç° 5 ä¸ªå­ PointMarker
  â†’ é€‰ä¸­æŸä¸ª PointMarker â†’ W/E/R å¾®è°ƒä½ç½®æœå‘
  â†’ ä¸æ»¡æ„ â†’ å›åˆ° AreaMarker â†’ [éšæœºç”Ÿæˆ]

ç¬¬2æ­¥ï¼šSceneView ä¸­æ ‡æ³¨å±æ€§
  é€‰ä¸­ PointMarker â†’ Inspector ä¸­çœ‹åˆ° SpawnAnnotation
  ï¼ˆå¦‚æœç”Ÿæˆæ—¶å‹¾é€‰äº†"è‡ªåŠ¨æ·»åŠ æ ‡æ³¨"åˆ™å·²æœ‰ï¼Œå¦åˆ™æ‰‹åŠ¨ Add Componentï¼‰
  â†’ è®¾ç½® MonsterId: "skeleton_warrior", Level: 3, Behavior: Patrol
  â†’ SceneView ä¸­è¯¥ç‚¹ä½å˜ä¸ºçº¢è‰²ï¼Œä¸Šæ–¹æ˜¾ç¤º "skeleton_warrior Lv.3"

ç¬¬3æ­¥ï¼šBlueprint ä¸­ç¼–æ’è¿è¡Œæ—¶æµç¨‹
  [Trigger.EnterArea] â”€â”€â†’ [Spawn.Preset] â”€â”€â†’ [Condition.AllDead] â”€â”€â†’ [åç»­]
                               â”‚
                               â””â”€ spawnArea: ç»‘å®š AreaMarker
  Blueprint é‡Œæ²¡æœ‰ä»»ä½•æ€ªç‰©é…ç½®æ•°æ®ï¼Œåªæœ‰æµç¨‹è¿çº¿ã€‚

ç¬¬4æ­¥ï¼šå¯¼å‡º
  å¯¼å‡ºå™¨éå† AreaMarker çš„å­ PointMarker
  â†’ è¯»å–æ¯ä¸ª PointMarker ä¸Šçš„ SpawnAnnotation
  â†’ åˆå¹¶ä¸º Playbook æ¡ç›®
```

### 9.2 é¢„è®¾åˆ·æ€ªï¼ˆè·¯å¾„ Bï¼šæ— åŒºåŸŸï¼‰

```
ç¬¬1æ­¥ï¼šSceneView ä¸­æ‰‹åŠ¨æ”¾ç½®
  åœ¨åœºæ™¯ä¸­æ‰‹åŠ¨æ”¾ç½® 3 ä¸ª PointMarker
  â†’ ç»™æ¯ä¸ªåŠ  SpawnAnnotationï¼Œé…ç½®ä¸åŒçš„æ€ªç‰©

ç¬¬2æ­¥ï¼šBlueprint ä¸­ç¼–æ’
  [Trigger.EnterArea] â”€â”€â†’ [Spawn.Preset] â”€â”€â†’ [åç»­]
                               â”‚
                               â””â”€ spawnPoints: ç»‘å®š 3 ä¸ª PointMarker

ç¬¬3æ­¥ï¼šå¯¼å‡º
  å¯¼å‡ºå™¨ç›´æ¥ä½¿ç”¨ç»‘å®šçš„ PointMarker + Annotation
```

### 9.3 åŒä¸€ç‚¹ä½å¤šç”¨é€”

```
SceneViewï¼š
  PointMarker "Bosså‡ºåœºç‚¹"
    â”œâ”€ SpawnAnnotation: monsterId="boss_dragon", level=10
    â””â”€ CameraAnnotation: fov=45, transitionDuration=2.0

Blueprintï¼š
  [Trigger] â”€â”€â†’ [Camera.MoveTo] â”€â”€â†’ [Spawn.Preset] â”€â”€â†’ [åç»­]
                      â”‚                    â”‚
                      â””â”€ ç»‘å®šåŒä¸€ä¸ª         â””â”€ ç»‘å®šåŒä¸€ä¸ª
                         PointMarker           PointMarker

å¯¼å‡ºï¼š
  Camera.MoveTo è¯»å– CameraAnnotation æ•°æ®
  Spawn.Preset è¯»å– SpawnAnnotation æ•°æ®
  ä¸¤ä¸ªèŠ‚ç‚¹å¼•ç”¨åŒä¸€ä¸ª Markerï¼Œå„å–æ‰€éœ€
```

---

## åã€ç›®å½•ç»“æ„

```
Assets/Extensions/SceneBlueprint/
  â”œâ”€â”€ Runtime/
  â”‚   â”œâ”€â”€ Markers/
  â”‚   â”‚   â”œâ”€â”€ SceneMarker.cs                    â† ç°æœ‰ï¼Œä¸æ”¹
  â”‚   â”‚   â”œâ”€â”€ PointMarker.cs                    â† ç°æœ‰ï¼Œä¸æ”¹
  â”‚   â”‚   â”œâ”€â”€ AreaMarker.cs                     â† ç°æœ‰ï¼Œä¸æ”¹
  â”‚   â”‚   â””â”€â”€ Annotations/                      â† ã€æ–°å¢ç›®å½•ã€‘
  â”‚   â”‚       â”œâ”€â”€ MarkerAnnotation.cs           â† æŠ½è±¡åŸºç±»
  â”‚   â”‚       â”œâ”€â”€ SpawnAnnotation.cs            â† åˆ·æ€ªç‚¹æ ‡æ³¨
  â”‚   â”‚       â”œâ”€â”€ CameraAnnotation.cs           â† ç›¸æœºç‚¹æ ‡æ³¨
  â”‚   â”‚       â””â”€â”€ InitialBehavior.cs            â† åˆå§‹è¡Œä¸ºæšä¸¾
  â”‚   â””â”€â”€ ...
  â”‚
  â”œâ”€â”€ Editor/
  â”‚   â”œâ”€â”€ Markers/
  â”‚   â”‚   â”œâ”€â”€ Pipeline/
  â”‚   â”‚   â”‚   â”œâ”€â”€ GizmoRenderPipeline.cs        â† ä¿®æ”¹ï¼šæ–°å¢ Decoration é˜¶æ®µ
  â”‚   â”‚   â”‚   â”œâ”€â”€ GizmoStyleConstants.cs        â† ä¿®æ”¹ï¼šé¢œè‰²æŸ¥è¯¢æ’å…¥ Annotation å±‚
  â”‚   â”‚   â”‚   â””â”€â”€ MarkerCache.cs                â† ä¿®æ”¹ï¼šæ–°å¢ Annotation ç¼“å­˜
  â”‚   â”‚   â”‚
  â”‚   â”‚   â”œâ”€â”€ Annotations/                      â† ã€æ–°å¢ç›®å½•ã€‘
  â”‚   â”‚   â”‚   â”œâ”€â”€ AnnotationDefinition.cs       â† æ ‡æ³¨ç±»å‹å…ƒæ•°æ®
  â”‚   â”‚   â”‚   â”œâ”€â”€ IAnnotationDefinitionProvider.cs  â† æ¥å£ + Attribute
  â”‚   â”‚   â”‚   â”œâ”€â”€ AnnotationDefinitionRegistry.cs   â† AutoDiscover æ³¨å†Œè¡¨
  â”‚   â”‚   â”‚   â””â”€â”€ Definitions/
  â”‚   â”‚   â”‚       â”œâ”€â”€ SpawnAnnotationDef.cs     â† åˆ·æ€ªæ ‡æ³¨å®šä¹‰
  â”‚   â”‚   â”‚       â””â”€â”€ CameraAnnotationDef.cs    â† ç›¸æœºæ ‡æ³¨å®šä¹‰
  â”‚   â”‚   â”‚
  â”‚   â”‚   â””â”€â”€ Tools/
  â”‚   â”‚       â””â”€â”€ AreaMarkerEditor.cs           â† ä¿®æ”¹ï¼šå¯é€‰è‡ªåŠ¨æ·»åŠ æ ‡æ³¨
  â”‚   â”‚
  â”‚   â””â”€â”€ Export/
  â”‚       â””â”€â”€ BlueprintExporter.cs              â† ä¿®æ”¹ï¼šæ”¶é›† Annotation æ•°æ®
  â”‚
  â”œâ”€â”€ Actions/
  â”‚   â””â”€â”€ Spawn/
  â”‚       â””â”€â”€ SpawnPresetDef.cs                 â† ä¿®æ”¹ï¼šåŒç»‘å®šæ§½
  â”‚
  â””â”€â”€ æ ‡è®°æ ‡æ³¨ç³»ç»Ÿè®¾è®¡.md                        â† æœ¬æ–‡æ¡£
```

---

## åä¸€ã€å®æ–½è·¯çº¿

### Phase 1ï¼šåŸºç¡€æ¡†æ¶ï¼ˆæœ€å°å¯ç”¨ï¼‰âœ… å·²å®Œæˆ

```
ç›®æ ‡ï¼šMarkerAnnotation åŸºç±» + SpawnAnnotation + æ‰‹åŠ¨ Add Component å¯ç”¨

æ­¥éª¤ï¼š
  âœ… M1. åˆ›å»º Runtime/Markers/Annotations/MarkerAnnotation.csï¼ˆæŠ½è±¡åŸºç±»ï¼‰
  âœ… M2. åˆ›å»º Runtime/Markers/Annotations/InitialBehavior.csï¼ˆæšä¸¾ï¼‰
  âœ… M3. åˆ›å»º Runtime/Markers/Annotations/SpawnAnnotation.csï¼ˆåˆ·æ€ªæ ‡æ³¨ï¼‰
  âœ… M4. ç¼–è¯‘éªŒè¯ï¼šæ‰‹åŠ¨ç»™ PointMarker Add Component â†’ SpawnAnnotation
      â†’ Inspector ä¸­å¯ç¼–è¾‘ MonsterId/Level/Behavior

éªŒæ”¶ï¼šåœ¨ Unity ä¸­é€‰ä¸­ PointMarker â†’ Add Component â†’ SpawnAnnotation
      â†’ Inspector æ˜¾ç¤ºæ€ªç‰©é…ç½®å­—æ®µï¼Œå¯ç¼–è¾‘ä¿å­˜
```

### Phase 2ï¼šæ³¨å†Œè¡¨ + é€‚ç”¨æ€§ âœ… å·²å®Œæˆ

```
ç›®æ ‡ï¼šAnnotationDefinitionRegistry è‡ªåŠ¨å‘ç°ï¼Œç¼–è¾‘å™¨å¯æŸ¥è¯¢é€‚ç”¨æ ‡æ³¨

æ­¥éª¤ï¼š
  âœ… M5. åˆ›å»º Editor/Markers/Annotations/AnnotationDefinition.cs
  âœ… M6. åˆ›å»º Editor/Markers/Annotations/IAnnotationDefinitionProvider.csï¼ˆæ¥å£ + Attributeï¼‰
  âœ… M7. åˆ›å»º Editor/Markers/Annotations/AnnotationDefinitionRegistry.csï¼ˆAutoDiscoverï¼‰
  âœ… M8. åˆ›å»º Editor/Markers/Annotations/Definitions/SpawnAnnotationDef.cs

éªŒæ”¶ï¼šåœ¨ç¼–è¾‘å™¨è„šæœ¬ä¸­è°ƒç”¨ AnnotationDefinitionRegistry.GetApplicable("Point")
      â†’ è¿”å› SpawnAnnotationDef
```

### Phase 3ï¼šGizmo é›†æˆ âœ… å·²å®Œæˆ

```
ç›®æ ‡ï¼šæœ‰ SpawnAnnotation çš„ PointMarker æ˜¾ç¤ºä¸åŒé¢œè‰²å’Œæ ‡ç­¾

æ­¥éª¤ï¼š
  âœ… M9.  ä¿®æ”¹ MarkerCacheï¼šæ–°å¢ _annotationCache + GetAnnotations() æ–¹æ³•
  âœ… M10. ä¿®æ”¹ GizmoStyleConstants.GetMarkerColorï¼šæ’å…¥ Annotation é¢œè‰²è¦†ç›–å±‚
  âœ… M11. ä¿®æ”¹ GizmoRenderPipelineï¼šæ–°å¢ ExecuteDecorationPhase
  âœ… M12. å®ç° SpawnAnnotation.DrawGizmoDecorationï¼ˆæ€ªç‰©æ ‡ç­¾ + è­¦æˆ’èŒƒå›´ï¼‰

éªŒæ”¶ï¼šPointMarker æ—  Annotation â†’ é»˜è®¤ç°è‰²çƒä½“
      PointMarker æœ‰ SpawnAnnotationï¼ˆMonsterId éç©ºï¼‰â†’ çº¢è‰²çƒä½“ + é‡‘é»„è‰²æ€ªç‰©æ ‡ç­¾
      SpawnAnnotation Behavior=Guard â†’ é¢å¤–æ˜¾ç¤ºæ©™è‰²åŠé€æ˜è­¦æˆ’èŒƒå›´åœ†ç›˜
```

### Phase 4ï¼šä½ç½®ç”Ÿæˆå·¥å…·é›†æˆ âœ… å·²å®Œæˆ

```
ç›®æ ‡ï¼šç”Ÿæˆ PointMarker æ—¶å¯é€‰è‡ªåŠ¨æ·»åŠ  SpawnAnnotation

æ­¥éª¤ï¼š
  âœ… M13. ä¿®æ”¹ AreaMarkerEditorï¼šæ–°å¢"è‡ªåŠ¨æ·»åŠ æ ‡æ³¨"é€‰é¡¹ï¼ˆä¸‹æ‹‰èœå•ä» Registry åŠ¨æ€è·å–ï¼‰
  âœ… M14. GeneratePointMarkers ä¸­æŒ‰é€‰é¡¹è°ƒç”¨ go.AddComponent(annDef.ComponentType)

éªŒæ”¶ï¼šå‹¾é€‰"è‡ªåŠ¨æ·»åŠ æ ‡æ³¨: åˆ·æ€ªç‚¹æ ‡æ³¨" â†’ [éšæœºç”Ÿæˆ]
      â†’ ç”Ÿæˆçš„ PointMarker è‡ªåŠ¨å¸¦æœ‰ SpawnAnnotation
      â†’ å–æ¶ˆå‹¾é€‰åç”Ÿæˆ â†’ PointMarker ä¸å¸¦æ ‡æ³¨
```

### Phase 5ï¼šBlueprint èŠ‚ç‚¹ + å¯¼å‡º âœ… å·²å®Œæˆ

```
ç›®æ ‡ï¼šSpawn.Preset æ”¯æŒåŒç»‘å®šæ§½ï¼Œå¯¼å‡ºå™¨æ”¶é›† Annotation æ•°æ®

æ­¥éª¤ï¼š
  âœ… M15. ä¿®æ”¹ SpawnPresetDefï¼šåŒç»‘å®šæ§½ï¼ˆspawnArea + spawnPointsï¼‰
  âœ… M16. æ–°å¢ SceneBindingEntry.Annotations å­—æ®µ + AnnotationDataEntry ç±»
  âœ… M17. æ–°å¢ AnnotationExportHelper å·¥å…·ç±»ï¼ˆæ”¶é›†å­ç‚¹ä½ + Annotation æ•°æ®ï¼‰
  âœ… M18. æ–°å¢ BlueprintExporter.EnrichBindingsWithAnnotations åå¤„ç†æ­¥éª¤
         â†’ AreaMarker å±•å¼€å­ PointMarker â†’ æ¯ä¸ªç”Ÿæˆç‹¬ç«‹ SceneBindingEntry
         â†’ PointMarker ç›´æ¥æ”¶é›† Annotation
         â†’ æ—  Annotation æ—¶æ‰“å° Info æ—¥å¿—ï¼Œå›é€€åˆ°èŠ‚ç‚¹å…¨å±€é…ç½®

éªŒæ”¶ï¼šå¯¼å‡º Playbook â†’ JSON ä¸­ SceneBindings åŒ…å«å±•å¼€çš„å­ç‚¹ä½ + Annotations æ•°æ®
```

### Phase 6ï¼šæ‰©å±•æ ‡æ³¨ç±»å‹ âœ… å·²å®Œæˆ

```
ç›®æ ‡ï¼šæ–°å¢ CameraAnnotationï¼ŒéªŒè¯æ‰©å±•æ€§

æ­¥éª¤ï¼š
  âœ… M19. åˆ›å»º Runtime/Markers/Annotations/CameraAnnotation.cs
         ï¼ˆFOV/TransitionDuration/Easing/LockRotation + è§†é”¥çº¿æ¡† Gizmoï¼‰
  âœ… M20. åˆ›å»º Editor/Markers/Annotations/Definitions/CameraAnnotationDef.cs
  âœ… M21. CameraAnnotation.DrawGizmoDecorationï¼šç»¿è‰²è§†é”¥çº¿æ¡† + FOV æ ‡ç­¾

éªŒæ”¶ï¼šPointMarker åŒæ—¶æŒ‚ SpawnAnnotation + CameraAnnotation
      â†’ Gizmo æ˜¾ç¤ºä¸¤ç§è£…é¥°å åŠ ï¼ˆçº¢è‰²çƒä½“ + æ€ªç‰©æ ‡ç­¾ + è§†é”¥çº¿æ¡†ï¼‰
      â†’ å¯¼å‡ºæ•°æ® Annotations æ•°ç»„åŒ…å« "Spawn" + "Camera" ä¸¤ä¸ªæ¡ç›®
```

---

## åäºŒã€è®¾è®¡å†³ç­–è®°å½•

| # | é—®é¢˜ | å†³ç­– | ç†ç”± |
|---|------|------|------|
| A1 | æ ‡æ³¨æ•°æ®å­˜åœ¨å“ªä¸€å±‚ï¼Ÿ | SceneView å±‚ï¼ˆMonoBehaviour ç»„ä»¶ï¼‰ | æ ‡æ³¨æ˜¯ç©ºé—´æ ‡æ³¨ï¼Œä¸æ˜¯è¿è¡Œæ—¶é€»è¾‘ï¼›Blueprint ä¸å­˜å‚¨é…ç½®æ•°æ® |
| A2 | å®ç°æ–¹å¼ï¼Ÿ | è·¯å¾„ Cï¼šç»„ä»¶åŒ–æ ‡æ³¨ | ç¬¦åˆ Unity ç»„ä»¶åŒ–è®¾è®¡ï¼ŒInspector å¤©ç„¶æ”¯æŒï¼Œä¸€ç‚¹å¤šç”¨ |
| A3 | ç‹¬ç«‹ PointMarker æ€ä¹ˆç»‘å®šï¼Ÿ | Spawn.Preset åŒç»‘å®šæ§½ï¼ˆspawnArea + spawnPointsï¼‰ | æ”¯æŒæœ‰åŒºåŸŸå’Œæ— åŒºåŸŸä¸¤ç§åœºæ™¯ï¼Œå¯æ··åˆä½¿ç”¨ |
| A4 | å¯¼å‡ºæ—¶æ—  Annotation æ€ä¹ˆå¤„ç†ï¼Ÿ | æ‰“å°æ—¥å¿—ï¼Œå›é€€åˆ°èŠ‚ç‚¹å…¨å±€é…ç½® | ä¸é˜»æ­¢å¯¼å‡ºï¼Œä¿æŒçµæ´»æ€§ |
| A5 | Gizmo æ€ä¹ˆé›†æˆï¼Ÿ | Annotation æä¾›å¯é€‰çš„ Decoration + é¢œè‰²è¦†ç›– | ç®¡çº¿æ–°å¢ Decoration é˜¶æ®µï¼ŒMarkerCache ç¼“å­˜ Annotation |
| A6 | åŸºç±»æ”¾åœ¨å“ªä¸€å±‚ï¼Ÿ | Runtime å±‚ | å› ä¸º SceneMarker åœ¨ Runtime å±‚ï¼Œæ ‡æ³¨ç»„ä»¶éšåœºæ™¯åºåˆ—åŒ– |
| A7 | Gizmo ç»˜åˆ¶æ–¹æ³•æ”¾åœ¨ Runtime è¿˜æ˜¯ Editorï¼Ÿ | åŸºç±»å£°æ˜ virtual æ–¹æ³•åœ¨ Runtimeï¼Œå…·ä½“ç»˜åˆ¶é€»è¾‘éœ€è¦ `#if UNITY_EDITOR` æˆ–ç”±ç®¡çº¿è°ƒç”¨ | ä¿æŒåŸºç±»ç®€æ´ï¼Œç¼–è¾‘å™¨ç‰¹å®šé€»è¾‘é€šè¿‡ç®¡çº¿è°ƒåº¦ |

---

## åä¸‰ã€å¼€æ”¾é—®é¢˜

| é—®é¢˜ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| SpawnAnnotation çš„ MonsterId æ˜¯å¦éœ€è¦ä¸‹æ‹‰é€‰æ‹©ï¼ˆå¼•ç”¨æ€ªç‰©è¡¨ï¼‰ï¼Ÿ | å¾…å®š | å–å†³äºè¿è¡Œæ—¶æ€ªç‰©é…ç½®ç³»ç»Ÿçš„è®¾è®¡ |
| æ˜¯å¦éœ€è¦"æ‰¹é‡ç¼–è¾‘æ ‡æ³¨"åŠŸèƒ½ï¼ˆé€‰ä¸­å¤šä¸ª PointMarker ç»Ÿä¸€è®¾ç½®ï¼‰ï¼Ÿ | å¾…å®š | å¯è€ƒè™‘åç»­è¿­ä»£ |
| Annotation çš„ Gizmo ç»˜åˆ¶æ˜¯å¦éœ€è¦å›¾å±‚æ§åˆ¶ï¼ˆç‹¬ç«‹å¼€å…³ï¼‰ï¼Ÿ | å¾…å®š | å¯å¤ç”¨ç°æœ‰ MarkerLayerSystem |
| DrawGizmoDecoration ä¸­ä½¿ç”¨ Handles API æ˜¯å¦éœ€è¦ Editor æ¡ä»¶ç¼–è¯‘ï¼Ÿ | **å·²è§£å†³** | åŸºç±» virtual æ–¹æ³•åœ¨ Runtime å±‚å£°æ˜ï¼Œå…·ä½“ç»˜åˆ¶é€»è¾‘ç”¨ `#if UNITY_EDITOR` ä¿æŠ¤ |
| æ€ªç‰©é¢„è®¾è¡Œä¸ºæ–¹æ¡ˆï¼ˆInitialBehavior çš„è¿è¡Œæ—¶æ¶ˆè´¹æ–¹å¼ï¼‰ï¼Ÿ | å¾…å®š | å·²å®šä¹‰æšä¸¾ï¼ˆIdle/Patrol/Guard/Ambushï¼‰ï¼Œè¿è¡Œæ—¶ AI ç³»ç»Ÿæ¶ˆè´¹æ–¹å¼å¾…è®¾è®¡ |
