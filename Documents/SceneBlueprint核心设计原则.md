# SceneBlueprint æ ¸å¿ƒè®¾è®¡åŸåˆ™

> **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.4  
> **åˆ›å»ºæ—¥æœŸ**ï¼š2026-02-16  
> **æœ€åæ›´æ–°**ï¼š2026-02-22  
> **çŠ¶æ€**ï¼šâœ… active  
> **é‡è¦æ€§**ï¼šğŸ”´ æ ¸å¿ƒåŸåˆ™ - æ‰€æœ‰åŠŸèƒ½è®¾è®¡å¿…é¡»éµå¾ª
> **doc_status**: active  
> **last_reviewed**: 2026-02-22

---

> âš ï¸ **èŠ‚ç‚¹å˜æ›´è¯´æ˜ï¼ˆ2026-02-19ï¼‰**ï¼šæœ¬æ–‡æ¡£éƒ¨åˆ†ç¤ºä¾‹å¼•ç”¨äº†ä»¥ä¸‹**å·²åˆ é™¤èŠ‚ç‚¹**ï¼Œé˜…è¯»æ—¶è¯·å¿½ç•¥è¿™äº›å¼•ç”¨ï¼š
> - `Location.RandomArea` / `Location.RandomInArea` â€” å·²åˆ é™¤ï¼Œåœºæ™¯éšæœºä½ç½®è·¯å¾„ä¸å†æ”¯æŒ
> - `Monster.Pool` â€” å·²åˆ é™¤ï¼Œæ€ªç‰©é…ç½®ç§»è‡³åœºæ™¯å±‚ï¼ˆ`WaveSpawnConfig` æ ‡æ³¨ç»„ä»¶ï¼‰
> - `Spawn.Execute` â€” å·²åˆ é™¤ï¼Œè¢« `Spawn.Preset` + `Spawn.Wave` è¦†ç›–
> - `Behavior.Assign` â€” å·²åˆ é™¤ï¼Œè¡Œä¸ºé…ç½®ç§»è‡³ `SpawnAnnotation`
> - `Condition.AllDead` â€” å·²åˆ é™¤
>
> **å½“å‰æœ‰æ•ˆçš„åˆ·æ€ªè·¯å¾„**ï¼š
> - è·¯å¾„ Aï¼ˆé¢„è®¾åˆ·æ€ªï¼‰ï¼šç¼–è¾‘å™¨å›ºåŒ– PointMarker â†’ `Spawn.Preset` ç»‘å®šè¿™äº› PointMarker
> - è·¯å¾„ Bï¼ˆæ³¢æ¬¡åˆ·æ€ªï¼‰ï¼š`Spawn.Wave` ç»‘å®š AreaMarkerï¼Œæ³¢æ¬¡é€»è¾‘é…ç½®åœ¨èŠ‚ç‚¹ `waves` å±æ€§ä¸­

---

## ç›®å½•

- [ä¸€ã€è®¾è®¡ç†å¿µ](#ä¸€è®¾è®¡ç†å¿µ)
  - [1.1 åœºæ™¯ä¸­å¿ƒåŒ–åŸåˆ™](#11-åœºæ™¯ä¸­å¿ƒåŒ–åŸåˆ™)
  - [1.2 èŒè´£åˆ†ç¦»åŸåˆ™](#12-èŒè´£åˆ†ç¦»åŸåˆ™)
  - [1.3 å•å‘æ•°æ®æµåŸåˆ™](#13-å•å‘æ•°æ®æµåŸåˆ™)
- [äºŒã€SceneView ä¸ Blueprint çš„å…³ç³»](#äºŒsceneview-ä¸-blueprint-çš„å…³ç³»)
  - [2.1 SceneViewï¼šç©ºé—´çœŸç›¸çš„å”¯ä¸€æ¥æº](#21-sceneviewç©ºé—´çœŸç›¸çš„å”¯ä¸€æ¥æº)
  - [2.2 Blueprintï¼šé€»è¾‘ç¼–æ’ä¸å¼•ç”¨](#22-blueprinté€»è¾‘ç¼–æ’ä¸å¼•ç”¨)
  - [2.3 èŒè´£è¾¹ç•Œè¡¨](#23-èŒè´£è¾¹ç•Œè¡¨)
- [ä¸‰ã€å·¥ä½œæµæ¨¡å¼](#ä¸‰å·¥ä½œæµæ¨¡å¼)
  - [3.1 è¿­ä»£å¼å·¥ä½œæµï¼ˆæ¨èï¼‰](#31-è¿­ä»£å¼å·¥ä½œæµæ¨è)
  - [3.2 åœºæ™¯ä¼˜å…ˆå·¥ä½œæµ](#32-åœºæ™¯ä¼˜å…ˆå·¥ä½œæµ)
  - [3.3 åæ¨¡å¼è­¦ç¤º](#33-åæ¨¡å¼è­¦ç¤º)
- [å››ã€ç¼–è¾‘å™¨äº¤äº’è®¾è®¡](#å››ç¼–è¾‘å™¨äº¤äº’è®¾è®¡)
  - [4.1 Marker åˆ›å»ºä¸æ ‡æ³¨](#41-marker-åˆ›å»ºä¸æ ‡æ³¨)
  - [4.2 Blueprint å¼•ç”¨æœºåˆ¶](#42-blueprint-å¼•ç”¨æœºåˆ¶)
  - [4.3 åŒå‘è¿½æº¯åŠŸèƒ½](#43-åŒå‘è¿½æº¯åŠŸèƒ½)
- [äº”ã€æŠ€æœ¯å®ç°è¦ç‚¹](#äº”æŠ€æœ¯å®ç°è¦ç‚¹)
  - [5.1 Marker ID ç®¡ç†](#51-marker-id-ç®¡ç†)
  - [5.2 ç»‘å®šéªŒè¯](#52-ç»‘å®šéªŒè¯)
  - [5.3 å¯¼å‡ºä¸è¿è¡Œæ—¶](#53-å¯¼å‡ºä¸è¿è¡Œæ—¶)
- [å…­ã€æœ€ä½³å®è·µ](#å…­æœ€ä½³å®è·µ)
  - [6.1 æ¨èçš„åœºæ™¯ç»„ç»‡æ–¹å¼](#61-æ¨èçš„åœºæ™¯ç»„ç»‡æ–¹å¼)
  - [6.2 æ¨èçš„è“å›¾ç»“æ„](#62-æ¨èçš„è“å›¾ç»“æ„)
  - [6.3 å¸¸è§åœºæ™¯ç¤ºä¾‹](#63-å¸¸è§åœºæ™¯ç¤ºä¾‹)
- [ä¸ƒã€ç¼–è¾‘å™¨é¢„è§ˆåˆ·æ–°ä¸ä¸€è‡´æ€§ç­–ç•¥](#ä¸ƒç¼–è¾‘å™¨é¢„è§ˆåˆ·æ–°ä¸ä¸€è‡´æ€§ç­–ç•¥)
  - [7.1 è®¾è®¡ç›®æ ‡](#71-è®¾è®¡ç›®æ ‡)
  - [7.2 äº‹ä»¶é©±åŠ¨è„åˆ·æ–°ä¸»é“¾è·¯](#72-äº‹ä»¶é©±åŠ¨è„åˆ·æ–°ä¸»é“¾è·¯)
  - [7.3 ç²¾å‡†åˆ·æ–°ä¼˜åŒ–ç‚¹](#73-ç²¾å‡†åˆ·æ–°ä¼˜åŒ–ç‚¹)
  - [7.4 ä¸€è‡´æ€§ä¸å…–åº•ç­–ç•¥](#74-ä¸€è‡´æ€§ä¸å…–åº•ç­–ç•¥)
- [å…«ã€Blueprint å®šä½ä¸ç¼–è¾‘å™¨å·¥å…·è¾¹ç•Œ](#å…«-blueprint-å®šä½ä¸ç¼–è¾‘å™¨å·¥å…·è¾¹ç•Œ)
  - [8.1 Blueprint çš„æ ¸å¿ƒå®šä½](#81-blueprint-çš„æ ¸å¿ƒå®šä½)
  - [8.2 ç¼–è¾‘å™¨å·¥å…· vs Blueprint èŠ‚ç‚¹çš„åˆ¤å®šè§„åˆ™](#82-ç¼–è¾‘å™¨å·¥å…·-vs-blueprint-èŠ‚ç‚¹çš„åˆ¤å®šè§„åˆ™)
  - [8.3 é¢„è®¾åˆ·æ€ª vs è¿è¡Œæ—¶éšæœºåˆ·æ€ªâ€”â€”ä¸¤æ¡è·¯å¾„](#83-é¢„è®¾åˆ·æ€ª-vs-è¿è¡Œæ—¶éšæœºåˆ·æ€ªä¸¤æ¡è·¯å¾„)
  - [8.4 ä½ç½®ç”Ÿæˆå·¥å…·çš„ç­–åˆ’å·¥ä½œæµ](#84-ä½ç½®ç”Ÿæˆå·¥å…·çš„ç­–åˆ’å·¥ä½œæµ)
  - [8.5 åæ¨¡å¼ï¼šæ··æ·†ç¼–è¾‘æ—¶ä¸è¿è¡Œæ—¶](#85-åæ¨¡å¼æ··æ·†ç¼–è¾‘æ—¶ä¸è¿è¡Œæ—¶)
- [ä¹ã€PropertyType æ‰©å±•ï¼šStructList ç»“æ„åŒ–åˆ—è¡¨](#ä¹propertytype-æ‰©å±•structlist-ç»“æ„åŒ–åˆ—è¡¨)
  - [9.1 èƒŒæ™¯](#91-èƒŒæ™¯)
  - [9.2 è®¾è®¡æ–¹æ¡ˆ](#92-è®¾è®¡æ–¹æ¡ˆ)
  - [9.3 å­˜å‚¨ç­–ç•¥](#93-å­˜å‚¨ç­–ç•¥)
  - [9.4 ä½¿ç”¨ç¤ºä¾‹](#94-ä½¿ç”¨ç¤ºä¾‹)
  - [9.5 æ˜¾ç¤ºæ•ˆæœ](#95-æ˜¾ç¤ºæ•ˆæœ)
- [åã€Trigger èŠ‚ç‚¹ç»Ÿä¸€ä¸ºæ¡ä»¶ç­‰å¾…èŠ‚ç‚¹](#åtrigger-èŠ‚ç‚¹ç»Ÿä¸€ä¸ºæ¡ä»¶ç­‰å¾…èŠ‚ç‚¹)
  - [10.1 èƒŒæ™¯](#101-èƒŒæ™¯)
  - [10.2 è®¾è®¡å†³ç­–](#102-è®¾è®¡å†³ç­–)
  - [10.3 æ”¹åŠ¨å¯¹æ¯”](#103-æ”¹åŠ¨å¯¹æ¯”)
  - [10.4 å…¸å‹è“å›¾è¿æ¥](#104-å…¸å‹è“å›¾è¿æ¥)
  - [10.5 è¿è¡Œæ—¶ç³»ç»Ÿ](#105-è¿è¡Œæ—¶ç³»ç»Ÿ)
  - [10.6 System æ‰§è¡Œé¡ºåº](#106-system-æ‰§è¡Œé¡ºåº)

---

## ä¸€ã€è®¾è®¡ç†å¿µ

### 1.1 åœºæ™¯ä¸­å¿ƒåŒ–åŸåˆ™

**æ ¸å¿ƒç†å¿µ**ï¼šSceneView æ˜¯"ç©ºé—´çœŸç›¸çš„å”¯ä¸€æ¥æº"ï¼ˆSingle Source of Truth for Spatial Dataï¼‰

```
SceneViewï¼ˆç©ºé—´å±‚ï¼‰
  â”œâ”€ å›ç­”æ‰€æœ‰çš„"åœ¨å“ªé‡Œ"é—®é¢˜
  â”œâ”€ å®šä¹‰ Marker çš„ä½ç½®ã€å½¢çŠ¶ã€èŒƒå›´
  â””â”€ å¯è§†åŒ–ç©ºé—´å…³ç³»

Blueprintï¼ˆé€»è¾‘å±‚ï¼‰
  â”œâ”€ å›ç­”æ‰€æœ‰çš„"æ€ä¹ˆåš"é—®é¢˜
  â”œâ”€ å®šä¹‰æ—¶åºã€æ¡ä»¶ã€æ•°æ®æµ
  â””â”€ å¼•ç”¨ SceneView ä¸­çš„ Markerï¼ˆå•å‘ä¾èµ–ï¼‰
```

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
- âœ… **æ¶ˆé™¤æ­§ä¹‰**ï¼šå½“ç©ºé—´æ•°æ®å†²çªæ—¶ï¼ŒSceneView æ˜¯å”¯ä¸€æƒå¨
- âœ… **é™ä½å¤æ‚åº¦**ï¼šé¿å…åŒå‘åŒæ­¥å¸¦æ¥çš„çŠ¶æ€ä¸€è‡´æ€§é—®é¢˜
- âœ… **ç¬¦åˆç›´è§‰**ï¼šç­–åˆ’ä¹ æƒ¯åœ¨åœºæ™¯ä¸­æ€è€ƒå’Œæ“ä½œ
- âœ… **æå‡å¯ç»´æŠ¤æ€§**ï¼šèŒè´£æ¸…æ™°ï¼Œé—®é¢˜å®šä½å®¹æ˜“

---

### 1.2 èŒè´£åˆ†ç¦»åŸåˆ™

**æ ¸å¿ƒç†å¿µ**ï¼šSceneView è´Ÿè´£"æ˜¯ä»€ä¹ˆ"ï¼ˆWhatï¼‰ï¼ŒBlueprint è´Ÿè´£"åšä»€ä¹ˆ"ï¼ˆDo Whatï¼‰

#### SceneView çš„èŒè´£

| èŒè´£ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| **ç©ºé—´å£°æ˜** | å£°æ˜åœºæ™¯ä¸­çš„ç©ºé—´å…ƒç´  | "è¿™é‡Œæ˜¯åˆ·æ€ªåŒºåŸŸ"ã€"è¿™æ˜¯è§¦å‘çº¿" |
| **ä½ç½®å®šä¹‰** | å®šä¹‰ç²¾ç¡®çš„åæ ‡ã€å½¢çŠ¶ã€èŒƒå›´ | å¤šè¾¹å½¢åŒºåŸŸã€è·¯å¾„ç‚¹åºåˆ— |
| **è§†è§‰æ ‡æ³¨** | ä¸ºç­–åˆ’æä¾›å¯è§†åŒ–è¾…åŠ© | åŒºåŸŸé¢œè‰²ã€æ ‡ç­¾ã€å›¾æ ‡ |
| **ç»„ç»‡ç»“æ„** | æ ‡è®°ä¹‹é—´çš„é€»è¾‘åˆ†ç»„ | "èµ°å»ŠAçš„åˆ·æ€ªç‚¹"ã€"Bossæˆ¿é—´çš„æœºå…³" |

**SceneView ä¸è´Ÿè´£**ï¼š
- âŒ ä½•æ—¶è§¦å‘ï¼ˆæ—¶åºï¼‰
- âŒ è§¦å‘æ¡ä»¶ï¼ˆé€»è¾‘ï¼‰
- âŒ è¡Œä¸ºæ§åˆ¶ï¼ˆAIï¼‰
- âŒ æ•°æ®æµè½¬ï¼ˆè¿çº¿ï¼‰

---

#### Blueprint çš„èŒè´£

| èŒè´£ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| **æ—¶åºç¼–æ’** | å®šä¹‰äº‹ä»¶çš„å‘ç”Ÿé¡ºåº | "ç¬¬ä¸€æ³¢ â†’ ç¬¬äºŒæ³¢ â†’ Boss" |
| **æ¡ä»¶é€»è¾‘** | å®šä¹‰è§¦å‘æ¡ä»¶å’Œåˆ†æ”¯ | "å…¨ç­å â†’ å¼€é—¨"ã€"è¡€é‡<50% â†’ ç‹‚æš´" |
| **æ•°æ®æµ** | å®šä¹‰æ•°æ®çš„ä¼ é€’å’Œè½¬æ¢ | "ä½ç½® + æ€ªç‰©é…ç½® â†’ åˆ·æ€ª" |
| **äº‹ä»¶å“åº”** | å®šä¹‰å¯¹æ¸¸æˆäº‹ä»¶çš„å“åº” | "ç©å®¶è¿›å…¥ â†’ è§¦å‘æˆ˜æ–—" |

**Blueprint ä¸è´Ÿè´£**ï¼š
- âŒ åˆ›å»ºæˆ–ä¿®æ”¹ Marker
- âŒ å®šä¹‰ç©ºé—´ä½ç½®å’Œå½¢çŠ¶
- âŒ å­˜å‚¨ä½ç½®åæ ‡æ•°æ®
- âŒ ç®¡ç†åœºæ™¯å¯¹è±¡çš„å±‚çº§å…³ç³»

---

### 1.3 å•å‘æ•°æ®æµåŸåˆ™

**æ ¸å¿ƒç†å¿µ**ï¼šæ•°æ®ä» SceneView æµå‘ Blueprintï¼Œä¸å›æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     SceneView       â”‚  ç©ºé—´æ•°æ®çš„å®šä¹‰å’Œå­˜å‚¨
â”‚                     â”‚
â”‚  Marker:            â”‚
â”‚    - ID             â”‚
â”‚    - Type           â”‚
â”‚    - Position       â”‚
â”‚    - Shape          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ æä¾› Marker IDsï¼ˆåªè¯»å¼•ç”¨ï¼‰
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Blueprint       â”‚  å¼•ç”¨ Marker IDsï¼Œç¼–æ’é€»è¾‘
â”‚                     â”‚
â”‚  Node:              â”‚
â”‚    - BindingId â”€â”€â”€â”€â”€â”¼â†’ å¼•ç”¨ Marker ID
â”‚    - Parameters     â”‚
â”‚    - Connections    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ ç”Ÿæˆ Playbook
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Runtime        â”‚  æ ¹æ® IDs æŸ¥è¯¢ç©ºé—´æ•°æ®ï¼Œæ‰§è¡Œé€»è¾‘
â”‚                     â”‚
â”‚  1. è§£æ Playbook   â”‚
â”‚  2. æŸ¥è¯¢ Marker     â”‚
â”‚  3. æ‰§è¡ŒèŠ‚ç‚¹é€»è¾‘    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ç‰¹æ€§**ï¼š
- âœ… Blueprint åªè¯»å– Marker IDï¼Œä¸ä¿®æ”¹ Marker
- âœ… ç­–åˆ’å¯ä»¥éšæ—¶è°ƒæ•´ SceneViewï¼ŒBlueprint æ— æ„ŸçŸ¥ï¼ˆé™¤é ID å˜åŒ–ï¼‰
- âœ… è¿è¡Œæ—¶é€šè¿‡ ID åŠ¨æ€æŸ¥è¯¢ï¼Œæ”¯æŒçƒ­æ›´æ–°

**é¿å…çš„åæ¨¡å¼**ï¼š
- âŒ Blueprint åˆ›å»º Marker
- âŒ Blueprint ä¿®æ”¹ Marker å±æ€§
- âŒ Marker å­˜å‚¨å¤æ‚é€»è¾‘é…ç½®

---

## äºŒã€SceneView ä¸ Blueprint çš„å…³ç³»

### 2.1 SceneViewï¼šç©ºé—´çœŸç›¸çš„å”¯ä¸€æ¥æº

#### æ ¸å¿ƒæ¦‚å¿µ

**Marker**ï¼šåœºæ™¯ä¸­çš„ç©ºé—´æ ‡è®°ï¼Œæ˜¯ SceneView çš„åŸºæœ¬å…ƒç´ 

```csharp
public class Marker
{
    public string Id;           // å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰
    public string Tag;          // å‹å¥½åç§°/åˆ†ç±»æ ‡ç­¾
    public MarkerType Type;     // Pointã€Areaã€Pathã€Volume ç­‰
    public Vector3 Position;    // ä¸–ç•Œåæ ‡
    public Quaternion Rotation; // æœå‘
    public object ShapeData;    // ç±»å‹ç‰¹å®šçš„å½¢çŠ¶æ•°æ®
}
```

#### Marker çš„ç±»å‹

| ç±»å‹ | ç”¨é€” | æ•°æ®ç»“æ„ |
|-----|------|---------|
| **Point** | å•ç‚¹ä½ç½®ï¼ˆåˆ·æ€ªç‚¹ã€ä¼ é€ç‚¹ï¼‰ | `Vector3 position` |
| **Area** | å¹³é¢åŒºåŸŸï¼ˆåˆ·æ€ªåŒºã€è§¦å‘åŒºï¼‰ | `Vector3[] polygon` |
| **Path** | è·¯å¾„ï¼ˆå·¡é€»è·¯çº¿ã€ç§»åŠ¨è½¨è¿¹ï¼‰ | `Vector3[] waypoints` |
| **Volume** | 3D ä½“ç§¯ï¼ˆæ£€æµ‹åŒºã€ä¼¤å®³åŒºï¼‰ | `Bounds bounds` æˆ– `Mesh` |

#### Marker çš„å‘½åè§„èŒƒ

```
æ¨èæ ¼å¼ï¼š<åŠŸèƒ½>_<åŒºåŸŸ>_<åºå·>

ç¤ºä¾‹ï¼š
  - spawn_hallway_01       // èµ°å»Šåˆ·æ€ªåŒºåŸŸ #1
  - trigger_boss_room      // Boss æˆ¿é—´è§¦å‘å™¨
  - patrol_guard_route_a   // å®ˆå« A çš„å·¡é€»è·¯çº¿
  - teleport_exit          // å‡ºå£ä¼ é€ç‚¹
```

---

### 2.2 Blueprintï¼šé€»è¾‘ç¼–æ’ä¸å¼•ç”¨

#### æ ¸å¿ƒæ¦‚å¿µ

**SceneBinding**ï¼šBlueprint èŠ‚ç‚¹å¯¹ Marker çš„å¼•ç”¨

```csharp
public class SceneBinding
{
    public string MarkerId;     // å¼•ç”¨çš„ Marker ID
    public BindingType Type;    // æœŸæœ›çš„ Marker ç±»å‹ï¼ˆéªŒè¯ç”¨ï¼‰
    public bool Required;       // æ˜¯å¦å¿…éœ€
}
```

#### å¼•ç”¨ç¤ºä¾‹

```
Blueprint èŠ‚ç‚¹ï¼š
  Location.RandomInArea:
    â”œâ”€ areaBinding: 
    â”‚    â””â”€ MarkerId: "spawn_hallway_01"
    â”‚    â””â”€ Type: Area
    â”‚    â””â”€ Required: true
    â”œâ”€ count: 5
    â””â”€ minDistance: 3.0

è¿è¡Œæ—¶è¡Œä¸ºï¼š
  1. é€šè¿‡ "spawn_hallway_01" æŸ¥è¯¢ Marker
  2. éªŒè¯ Marker ç±»å‹æ˜¯å¦ä¸º Area
  3. è·å– polygon æ•°æ®
  4. åœ¨åŒºåŸŸå†…ç”Ÿæˆ 5 ä¸ªéšæœºä½ç½®
```

---

### 2.3 èŒè´£è¾¹ç•Œè¡¨

| é—®é¢˜ | SceneView | Blueprint | è¯´æ˜ |
|-----|-----------|-----------|------|
| æ€ªç‰©åˆ·æ–°åœ¨å“ªé‡Œï¼Ÿ | âœ… | âŒ | SceneView å®šä¹‰åŒºåŸŸæˆ–ç‚¹ä½ |
| æ€ªç‰©ä½•æ—¶åˆ·æ–°ï¼Ÿ | âŒ | âœ… | Blueprint å®šä¹‰è§¦å‘æ¡ä»¶ |
| åˆ·å‡ ä¸ªæ€ªç‰©ï¼Ÿ | âŒ | âœ… | Blueprint é…ç½®æ•°é‡å‚æ•° |
| åŒºåŸŸçš„å½¢çŠ¶æ˜¯ä»€ä¹ˆï¼Ÿ | âœ… | âŒ | SceneView å®šä¹‰å¤šè¾¹å½¢ |
| åˆ·æ€ªååšä»€ä¹ˆï¼Ÿ | âŒ | âœ… | Blueprint è¿çº¿åç»­èŠ‚ç‚¹ |
| å·¡é€»è·¯å¾„çš„ç‚¹ä½ï¼Ÿ | âœ… | âŒ | SceneView æ”¾ç½®è·¯å¾„ç‚¹ |
| æ˜¯å¦å¾ªç¯å·¡é€»ï¼Ÿ | âŒ | âœ… | Blueprint é…ç½®å‚æ•° |
| è§¦å‘åŒºåŸŸåœ¨å“ªï¼Ÿ | âœ… | âŒ | SceneView ç”»åŒºåŸŸ |
| è§¦å‘å‡ æ¬¡ï¼Ÿ | âŒ | âœ… | Blueprint é…ç½®å‚æ•° |

---

## ä¸‰ã€å·¥ä½œæµæ¨¡å¼

### 3.1 è¿­ä»£å¼å·¥ä½œæµï¼ˆæ¨èï¼‰

**æ ¸å¿ƒç†å¿µ**ï¼šç­–åˆ’åœ¨ SceneView å’Œ Blueprint ä¹‹é—´è¿­ä»£ï¼Œæ¯æ¬¡åªèšç„¦ä¸€ä¸ªå±‚é¢

#### å…¸å‹è¿­ä»£æµç¨‹

```
ç¬¬ 1 è½®ï¼šå¿«é€Ÿæ­å»º
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ SceneView   â”‚  ç”»ä¸€ä¸ªåˆ·æ€ªåŒºåŸŸï¼ˆç²—ç•¥ï¼‰
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Blueprint   â”‚  åˆ›å»ºåŸºç¡€æµç¨‹ï¼šTrigger â†’ Spawn
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   æµ‹è¯•      â”‚  "å—¯ï¼Œä½ç½®ä¸å¤ªå¯¹"
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¬¬ 2 è½®ï¼šç©ºé—´è°ƒæ•´
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ SceneView   â”‚  è°ƒæ•´åŒºåŸŸå½¢çŠ¶ï¼Œå¢åŠ å·¡é€»ç‚¹
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Blueprint   â”‚  æ·»åŠ  Behavior.Patrolï¼Œè¿æ¥è·¯å¾„
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   æµ‹è¯•      â”‚  "è¿˜ä¸é”™ï¼Œä½†æ€ªç‰©å¤ªå°‘"
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¬¬ 3 è½®ï¼šå‚æ•°å¾®è°ƒ
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ SceneView   â”‚  æ‰‹åŠ¨è°ƒæ•´ä¸ªåˆ«æ€ªç‰©ä½ç½®
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Blueprint   â”‚  å¢åŠ æ€ªç‰©æ•°é‡ï¼Œè°ƒæ•´é—´éš”
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   æµ‹è¯•      â”‚  "å®Œç¾ï¼"
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ä¼˜åŠ¿**ï¼š
- âœ… æ¯æ¬¡åªæ”¹ä¸€ä¸ªå±‚é¢ï¼Œé™ä½è®¤çŸ¥è´Ÿæ‹…
- âœ… å¿«é€Ÿçœ‹åˆ°åé¦ˆï¼ŒåŠæ—¶è°ƒæ•´
- âœ… ç¬¦åˆè‡ªç„¶çš„è®¾è®¡æ€ç»´è¿‡ç¨‹
- âœ… æ”¯æŒæ¸è¿›å¼ç»†åŒ–

---

### 3.2 åœºæ™¯ä¼˜å…ˆå·¥ä½œæµ

**æ ¸å¿ƒç†å¿µ**ï¼šå¤§éƒ¨åˆ†æ“ä½œåœ¨ SceneView å®Œæˆï¼ŒBlueprint ä½œä¸ºè¾…åŠ©

#### æ¨èçš„æ“ä½œæµç¨‹

**æ­¥éª¤ 1ï¼šåœ¨ SceneView ä¸­æ ‡æ³¨**

```
ç­–åˆ’åœ¨ SceneView ä¸­ï¼š
  1. æ¿€æ´»"åŒºåŸŸæ ‡æ³¨å·¥å…·"
  2. åœ¨åœºæ™¯ä¸­ç”»å¤šè¾¹å½¢ â†’ è‡ªåŠ¨åˆ›å»º Marker
     - ID: è‡ªåŠ¨ç”Ÿæˆï¼ˆå¦‚ "area_001"ï¼‰
     - Tag: æ‰‹åŠ¨è¾“å…¥ï¼ˆå¦‚ "SpawnZone_Hallway"ï¼‰
  3. ç»§ç»­æ ‡æ³¨å…¶ä»–ç©ºé—´å…ƒç´ ï¼ˆè§¦å‘åŒºã€å·¡é€»è·¯å¾„ç­‰ï¼‰
```

**æ­¥éª¤ 2ï¼šå¿«é€Ÿåˆ›å»ºè“å›¾ï¼ˆå¯é€‰çš„è‡ªåŠ¨åŒ–ï¼‰**

```
åœºæ™¯æ ‡æ³¨å®Œæˆåï¼š
  å³é”® Marker â†’ "æ·»åŠ åˆ°è“å›¾"
  
  å¼¹å‡ºå¿«æ·èœå•ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ è¿™ä¸ªåŒºåŸŸå°†ç”¨äºï¼š        â”‚
  â”‚                         â”‚
  â”‚ â—‹ åˆ·æ€ªåŒºåŸŸ              â”‚
  â”‚ â—‹ è§¦å‘åŒºåŸŸ              â”‚
  â”‚ â—‹ å·¡é€»è·¯å¾„              â”‚
  â”‚ â—‹ å…¶ä»–ï¼ˆç¨åé…ç½®ï¼‰      â”‚
  â”‚                         â”‚
  â”‚ [åˆ›å»ºèŠ‚ç‚¹] [å–æ¶ˆ]       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  
  é€‰æ‹©"åˆ·æ€ªåŒºåŸŸ" â†’ è‡ªåŠ¨åœ¨ Blueprint ä¸­åˆ›å»ºï¼š
    - Location.RandomInAreaï¼ˆç»‘å®šæ­¤åŒºåŸŸï¼‰
    - Monster.Poolï¼ˆé»˜è®¤é…ç½®ï¼‰
    - Spawn.Executeï¼ˆè‡ªåŠ¨è¿çº¿ï¼‰
```

**æ­¥éª¤ 3ï¼šåœ¨ Blueprint ä¸­ç»†åŒ–é€»è¾‘**

```
åˆ‡æ¢åˆ° Blueprint çª—å£ï¼š
  - è°ƒæ•´èŠ‚ç‚¹å‚æ•°ï¼ˆæ•°é‡ã€é—´éš”ç­‰ï¼‰
  - æ·»åŠ æ¡ä»¶åˆ†æ”¯
  - è¿æ¥åç»­è¡Œä¸º
```

---

### 3.3 åæ¨¡å¼è­¦ç¤º

#### âŒ åæ¨¡å¼ 1ï¼šBlueprint ä¿®æ”¹ SceneView

**é”™è¯¯ç¤ºèŒƒ**ï¼š

```csharp
// é”™è¯¯ï¼šåœ¨ Blueprint èŠ‚ç‚¹ä¸­åˆ›å»º Marker
public class SpawnNode
{
    public void Execute()
    {
        // âŒ ä¸åº”è¯¥åœ¨è¿è¡Œæ—¶æˆ–ç¼–è¾‘æ—¶åˆ›å»º Marker
        var marker = SceneMarkerManager.CreateMarker(
            type: MarkerType.Area,
            position: transform.position
        );
    }
}
```

**ä¸ºä»€ä¹ˆé”™**ï¼š
- ç ´åäº†"SceneView æ˜¯ç©ºé—´çœŸç›¸å”¯ä¸€æ¥æº"çš„åŸåˆ™
- å¯¼è‡´ç©ºé—´æ•°æ®æ•£è½åœ¨ä¸¤å¤„ï¼Œéš¾ä»¥è¿½è¸ª
- è°ƒè¯•å›°éš¾ï¼šç­–åˆ’ä¸çŸ¥é“ Marker æ˜¯ä»å“ªé‡Œæ¥çš„

**æ­£ç¡®åšæ³•**ï¼š
- æ‰€æœ‰ Marker å¿…é¡»åœ¨ SceneView ä¸­æ‰‹åŠ¨åˆ›å»ºæˆ–é€šè¿‡åœºæ™¯å·¥å…·åˆ›å»º
- Blueprint åªèƒ½å¼•ç”¨å·²å­˜åœ¨çš„ Marker

---

#### âŒ åæ¨¡å¼ 2ï¼šMarker åŒ…å«å¤æ‚é€»è¾‘

**é”™è¯¯ç¤ºèŒƒ**ï¼š

```csharp
// é”™è¯¯ï¼šåœ¨ Marker ä¸­å­˜å‚¨é€»è¾‘é…ç½®
public class SpawnAreaMarker
{
    public Vector3[] Polygon;        // âœ… ç©ºé—´æ•°æ®ï¼ˆåˆç†ï¼‰
    public int SpawnCount;           // âŒ é€»è¾‘é…ç½®ï¼ˆä¸åº”è¯¥åœ¨è¿™é‡Œï¼‰
    public float SpawnInterval;      // âŒ é€»è¾‘é…ç½®ï¼ˆä¸åº”è¯¥åœ¨è¿™é‡Œï¼‰
    public string OnCompleteEvent;   // âŒ äº‹ä»¶é€»è¾‘ï¼ˆä¸åº”è¯¥åœ¨è¿™é‡Œï¼‰
}
```

**ä¸ºä»€ä¹ˆé”™**ï¼š
- Marker åº”è¯¥åªæè¿°"æ˜¯ä»€ä¹ˆ"ï¼Œä¸æè¿°"åšä»€ä¹ˆ"
- é€»è¾‘æ•£è½åœ¨åœºæ™¯ä¸­ï¼Œéš¾ä»¥æ•´ä½“æŠŠæ§æµç¨‹
- æ— æ³•å¤ç”¨åŒä¸€ä¸ª Marker ç”¨äºä¸åŒçš„é€»è¾‘

**æ­£ç¡®åšæ³•**ï¼š
```csharp
// Marker åªå­˜å‚¨ç©ºé—´æ•°æ®
public class AreaMarker
{
    public string Id;
    public Vector3[] Polygon;  // âœ… åªå­˜å‚¨å½¢çŠ¶
}

// é€»è¾‘é…ç½®åœ¨ Blueprint èŠ‚ç‚¹ä¸­
public class SpawnNode
{
    public string AreaBindingId;   // å¼•ç”¨ Marker ID
    public int SpawnCount;         // âœ… é€»è¾‘å‚æ•°åœ¨è¿™é‡Œ
    public float SpawnInterval;    // âœ… é€»è¾‘å‚æ•°åœ¨è¿™é‡Œ
}
```

---

#### âŒ åæ¨¡å¼ 3ï¼šé¢‘ç¹åˆ‡æ¢ä¸Šä¸‹æ–‡

**ä½æ•ˆæµç¨‹**ï¼š

```
ç­–åˆ’æ“ä½œï¼š
1. SceneViewï¼šç”»åŒºåŸŸ
2. åˆ‡æ¢åˆ° BlueprintWindow
3. åˆ›å»ºèŠ‚ç‚¹
4. ç‚¹å‡»"ç»‘å®šåœºæ™¯å¯¹è±¡"
5. åˆ‡å› SceneView é€‰æ‹©åŒºåŸŸ
6. åˆ‡å› BlueprintWindow é…ç½®å‚æ•°
7. åˆ‡å› SceneView æŸ¥çœ‹æ•ˆæœ
8. åˆ‡å› BlueprintWindow è°ƒæ•´å‚æ•°
9. ...ï¼ˆæ— é™å¾ªç¯ï¼‰
```

**æ”¹è¿›æ–¹æ¡ˆ**ï¼š
- æä¾›"å¿«é€Ÿåˆ›å»º"åŠŸèƒ½ï¼Œåœ¨ SceneView ä¸­ä¸€é”®ç”ŸæˆåŸºç¡€è“å›¾
- å®ç°"è§†è§‰æŠ•å½±"ï¼Œåœ¨ SceneView ä¸­é¢„è§ˆ Blueprint é€»è¾‘çš„ç©ºé—´æ•ˆæœ
- æ”¯æŒåœ¨ SceneView ä¸­ç›´æ¥è°ƒæ•´å¸¸ç”¨å‚æ•°ï¼ˆé€šè¿‡æµ®å±‚é¢æ¿ï¼‰

---

## å››ã€ç¼–è¾‘å™¨äº¤äº’è®¾è®¡

### 4.1 Marker åˆ›å»ºä¸æ ‡æ³¨

#### æ¨èçš„ UI å¸ƒå±€

```
SceneView å·¥å…·æ ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [é€‰æ‹©] [ç§»åŠ¨] [æ—‹è½¬] â”‚ [ç”»åŒºåŸŸâ–¼] [æ”¾ç‚¹] [ç»˜è·¯å¾„] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†‘
                    æ ‡æ³¨å·¥å…·ç»„
```

#### äº¤äº’æµç¨‹

**åˆ›å»º Area Marker**ï¼š

```
1. ç‚¹å‡»"ç”»åŒºåŸŸ"æŒ‰é’®
2. åœ¨ SceneView ä¸­ç‚¹å‡»é¼ æ ‡å·¦é”® â†’ æ”¾ç½®ç¬¬ä¸€ä¸ªé¡¶ç‚¹
3. ç»§ç»­ç‚¹å‡» â†’ æ·»åŠ æ›´å¤šé¡¶ç‚¹
4. åŒå‡»æˆ–æŒ‰ Enter â†’ å®Œæˆé—­åˆå¤šè¾¹å½¢
5. å¼¹å‡ºå±æ€§é¢æ¿ï¼š
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ åŒºåŸŸæ ‡è®°            â”‚
   â”‚                     â”‚
   â”‚ åç§°: [èµ°å»Šåˆ·æ€ªåŒº]  â”‚
   â”‚ æ ‡ç­¾: [SpawnZone]   â”‚
   â”‚ é¢œè‰²: [ğŸ”´çº¢è‰² â–¼]   â”‚
   â”‚                     â”‚
   â”‚ [ç¡®è®¤] [å–æ¶ˆ]       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åˆ›å»º Point Marker**ï¼š

```
1. ç‚¹å‡»"æ”¾ç‚¹"æŒ‰é’®
2. åœ¨åœºæ™¯ä¸­ç‚¹å‡» â†’ æ”¾ç½®ç‚¹ä½
3. ç›´æ¥åœ¨åœºæ™¯ä¸­æ˜¾ç¤ºå¯ç¼–è¾‘çš„æ ‡ç­¾
4. æ‹–åŠ¨ç‚¹å¯è°ƒæ•´ä½ç½®
```

**åˆ›å»º Path Marker**ï¼š

```
1. ç‚¹å‡»"ç»˜è·¯å¾„"æŒ‰é’®
2. ä¾æ¬¡ç‚¹å‡»è·¯å¾„ä¸Šçš„ç‚¹
3. æŒ‰ Enter å®Œæˆ
4. è·¯å¾„è‡ªåŠ¨è¿çº¿ï¼Œæ˜¾ç¤ºæ–¹å‘ç®­å¤´
```

---

### 4.2 Blueprint å¼•ç”¨æœºåˆ¶

#### ç»‘å®šæ“ä½œæµç¨‹

**åœ¨ Blueprint ä¸­ç»‘å®š Marker**ï¼š

```
1. åˆ›å»ºèŠ‚ç‚¹ï¼ˆå¦‚ Location.RandomInAreaï¼‰
2. ç‚¹å‡» "area" å±æ€§æ—çš„ [ğŸ”— ç»‘å®š] æŒ‰é’®
3. SceneView è‡ªåŠ¨è¿›å…¥"é€‰æ‹©æ¨¡å¼"ï¼š
   - æ‰€æœ‰ Area ç±»å‹çš„ Marker é«˜äº®æ˜¾ç¤ºï¼ˆè“è‰²è½®å»“ï¼‰
   - é¼ æ ‡æ‚¬åœåœ¨ Marker ä¸Š â†’ æ˜¾ç¤ºåç§°å’Œ ID
   - ç‚¹å‡»æŸä¸ª Marker â†’ è‡ªåŠ¨ç»‘å®š
4. ç»‘å®šæˆåŠŸåï¼ŒèŠ‚ç‚¹æ˜¾ç¤ºï¼š
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Location.RandomInArea  â”‚
   â”‚                        â”‚
   â”‚ ğŸ”— area: èµ°å»Šåˆ·æ€ªåŒº    â”‚  â† æ˜¾ç¤ºå‹å¥½åç§°
   â”‚ count: 5               â”‚
   â”‚ minDistance: 3.0       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è§†è§‰åé¦ˆ

**ç»‘å®šåçš„èŠ‚ç‚¹æ˜¾ç¤º**ï¼š

```
èŠ‚ç‚¹æ ‡é¢˜æ ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location.RandomInArea  â”‚
â”‚ ğŸ”— èµ°å»Šåˆ·æ€ªåŒº          â”‚  â† å‰¯æ ‡é¢˜æ˜¾ç¤ºç»‘å®šçš„ Marker
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‚¬åœæç¤ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç»‘å®šåˆ°åœºæ™¯å¯¹è±¡ï¼š       â”‚
â”‚   ID: spawn_hallway_01 â”‚
â”‚   ç±»å‹: Area           â”‚
â”‚   ä½ç½®: (10, 0, 5)     â”‚
â”‚                        â”‚
â”‚ åŒå‡»å¯åœ¨åœºæ™¯ä¸­èšç„¦     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœªç»‘å®šæ—¶çš„æç¤º**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location.RandomInArea  â”‚
â”‚                        â”‚
â”‚ âš ï¸ area: [æœªç»‘å®š]      â”‚  â† æ©™è‰²è­¦å‘Š
â”‚ count: 5               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.3 åŒå‘è¿½æº¯åŠŸèƒ½

#### ä» SceneView è¿½æº¯åˆ° Blueprint

```
æ“ä½œï¼š
  SceneView ä¸­å³é”® Marker â†’ "åœ¨è“å›¾ä¸­æŸ¥æ‰¾å¼•ç”¨"

ç»“æœï¼š
  Blueprint çª—å£è‡ªåŠ¨æ‰“å¼€å¹¶é«˜äº®æ‰€æœ‰å¼•ç”¨æ­¤ Marker çš„èŠ‚ç‚¹
  
  ç¤ºä¾‹ï¼š
  [Trigger.EnterArea] â† è“è‰²é«˜äº®æ¡†
       â†“
  [Location.RandomInArea] â† è“è‰²é«˜äº®æ¡†
       â†“
  [Spawn.Execute]
       â†“
  [Behavior.Assign]
  
  ä¾§è¾¹æ æ˜¾ç¤ºï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ å¼•ç”¨æ­¤æ ‡è®°çš„èŠ‚ç‚¹ï¼š      â”‚
  â”‚                         â”‚
  â”‚ â€¢ Trigger.EnterArea     â”‚
  â”‚   â†’ area å±æ€§           â”‚
  â”‚                         â”‚
  â”‚ â€¢ Location.RandomInArea â”‚
  â”‚   â†’ area å±æ€§           â”‚
  â”‚                         â”‚
  â”‚ [å…³é—­]                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ä» Blueprint è¿½æº¯åˆ° SceneView

```
æ“ä½œï¼š
  Blueprint ä¸­å³é”®èŠ‚ç‚¹ â†’ "åœ¨åœºæ™¯ä¸­æ˜¾ç¤ºç»‘å®šå¯¹è±¡"
  æˆ–ï¼šåŒå‡»ç»‘å®šå±æ€§ï¼ˆå¦‚ "ğŸ”— area: èµ°å»Šåˆ·æ€ªåŒº"ï¼‰

ç»“æœï¼š
  SceneView è‡ªåŠ¨ï¼š
    1. èšç„¦ï¼ˆFrameï¼‰åˆ° Marker ä½ç½®
    2. é«˜äº® Markerï¼ˆé—ªçƒè“è‰²è½®å»“ï¼‰
    3. æ˜¾ç¤º Marker ä¿¡æ¯é¢æ¿
    
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ èµ°å»Šåˆ·æ€ªåŒº          â”‚
  â”‚                     â”‚
  â”‚ ID: spawn_hall_01   â”‚
  â”‚ ç±»å‹: Area          â”‚
  â”‚ é¡¶ç‚¹æ•°: 6           â”‚
  â”‚ é¢ç§¯: 45.2 mÂ²       â”‚
  â”‚                     â”‚
  â”‚ è¢« 2 ä¸ªèŠ‚ç‚¹å¼•ç”¨     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### å•å‘è§†è§‰æŠ•å½±ï¼ˆæ¨èåŠŸèƒ½ï¼‰

```
æ“ä½œï¼š
  åœ¨ Blueprint ä¸­é€‰ä¸­èŠ‚ç‚¹ï¼ˆå¦‚ Location.RandomInAreaï¼‰

ç»“æœï¼š
  SceneView è‡ªåŠ¨æ˜¾ç¤º"åªè¯»æŠ•å½±"ï¼š
    - ç»‘å®šçš„ Area è¾¹ç•Œé—ªçƒé«˜äº®ï¼ˆè“è‰²ï¼‰
    - é¢„è§ˆç”Ÿæˆçš„ä½ç½®ç‚¹ï¼ˆåŠé€æ˜ç»¿è‰²åœ†åœˆï¼‰
    - èŠ‚ç‚¹å‚æ•°ä¿¡æ¯æµ®å±‚æ˜¾ç¤ºåœ¨åœºæ™¯ä¸­
    
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ é¢„è§ˆï¼š              â”‚
  â”‚ Location.RandomInAreaâ”‚
  â”‚                     â”‚
  â”‚ â€¢ 5 ä¸ªç”Ÿæˆç‚¹        â”‚
  â”‚ â€¢ æœ€å°é—´è·: 3.0m    â”‚
  â”‚ â€¢ åˆ†å¸ƒç®—æ³•: Poisson â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®**ï¼š
- è¿™æ˜¯åªè¯»æŠ•å½±ï¼Œä¸ä¿®æ”¹ SceneView çš„å®é™…æ•°æ®
- å¸®åŠ©ç­–åˆ’ç†è§£ Blueprint é€»è¾‘çš„ç©ºé—´å«ä¹‰
- å–æ¶ˆé€‰ä¸­èŠ‚ç‚¹ â†’ æŠ•å½±æ¶ˆå¤±

---

## äº”ã€æŠ€æœ¯å®ç°è¦ç‚¹

### 5.1 Marker ID ç®¡ç†

#### ID ç”Ÿæˆç­–ç•¥

```csharp
public static class MarkerIdGenerator
{
    // æ¨èï¼šä½¿ç”¨ GUID ç¡®ä¿å”¯ä¸€æ€§
    public static string Generate()
    {
        return Guid.NewGuid().ToString("N"); // 32ä½16è¿›åˆ¶å­—ç¬¦ä¸²
    }
    
    // å¯é€‰ï¼šä½¿ç”¨å‹å¥½çš„çŸ­ IDï¼ˆéœ€è¦ç»´æŠ¤å»é‡è¡¨ï¼‰
    public static string GenerateFriendly(string prefix)
    {
        return $"{prefix}_{DateTime.Now:yyyyMMddHHmmss}_{Random.Range(1000, 9999)}";
    }
}
```

#### ID å¼•ç”¨éªŒè¯

```csharp
public class SceneBindingValidator
{
    public static ValidationResult Validate(string markerId, BindingType expectedType)
    {
        // 1. æ£€æŸ¥ Marker æ˜¯å¦å­˜åœ¨
        var marker = MarkerRegistry.Find(markerId);
        if (marker == null)
            return ValidationResult.Error($"æœªæ‰¾åˆ°æ ‡è®°: {markerId}");
        
        // 2. æ£€æŸ¥ç±»å‹æ˜¯å¦åŒ¹é…
        if (!IsTypeCompatible(marker.Type, expectedType))
            return ValidationResult.Error($"ç±»å‹ä¸åŒ¹é…: æœŸæœ› {expectedType}ï¼Œå®é™… {marker.Type}");
        
        return ValidationResult.Success();
    }
}
```

---

### 5.2 ç»‘å®šéªŒè¯

#### ç¼–è¾‘æœŸéªŒè¯

```csharp
// åœ¨ Blueprint ç¼–è¾‘å™¨ä¸­å®æ—¶éªŒè¯
public class BlueprintValidator
{
    public void ValidateNode(ActionNodeData node)
    {
        foreach (var binding in node.SceneBindings)
        {
            var result = SceneBindingValidator.Validate(
                binding.MarkerId,
                binding.ExpectedType
            );
            
            if (!result.IsValid)
            {
                // åœ¨èŠ‚ç‚¹ä¸Šæ˜¾ç¤ºé”™è¯¯æ ‡è®°
                MarkNodeAsInvalid(node, result.ErrorMessage);
            }
        }
    }
}
```

#### è¿è¡Œæ—¶éªŒè¯

```csharp
// åœ¨ Playbook åŠ è½½æ—¶éªŒè¯
public class PlaybookLoader
{
    public void Load(PlaybookData data)
    {
        foreach (var action in data.Actions)
        {
            foreach (var bindingId in action.SceneBindingIds)
            {
                if (!MarkerRegistry.Exists(bindingId))
                {
                    Debug.LogError($"åœºæ™¯æ ‡è®°ç¼ºå¤±: {bindingId}");
                    // å¯é€‰ï¼šæ˜¾ç¤ºç¼–è¾‘å™¨è­¦å‘Šï¼Œé˜»æ­¢è¿è¡Œ
                }
            }
        }
    }
}
```

---

### 5.3 å¯¼å‡ºä¸è¿è¡Œæ—¶

#### å¯¼å‡ºç­–ç•¥

```
æ–¹æ¡ˆ Aï¼šå¯¼å‡º Marker IDï¼ˆæ¨èï¼‰
  Playbook.json:
  {
    "actions": [
      {
        "type": "Location.RandomInArea",
        "areaId": "spawn_hallway_01",  â† åªå­˜ ID
        "count": 5
      }
    ]
  }
  
  ä¼˜ç‚¹ï¼š
    - æ–‡ä»¶ä½“ç§¯å°
    - åœºæ™¯è°ƒæ•´æ— éœ€é‡æ–°å¯¼å‡ºè“å›¾
    - æ”¯æŒçƒ­æ›´æ–°
  
  ç¼ºç‚¹ï¼š
    - è¿è¡Œæ—¶éœ€è¦æŸ¥è¯¢ Marker æ•°æ®

æ–¹æ¡ˆ Bï¼šå¯¼å‡ºå®Œæ•´æ•°æ®
  Playbook.json:
  {
    "actions": [
      {
        "type": "Location.RandomInArea",
        "area": {
          "polygon": [[10,0,5], [15,0,5], ...]  â† å†…è”å®Œæ•´æ•°æ®
        },
        "count": 5
      }
    ]
  }
  
  ä¼˜ç‚¹ï¼š
    - è¿è¡Œæ—¶æ— éœ€æŸ¥è¯¢
    - ç‹¬ç«‹è¿è¡Œ
  
  ç¼ºç‚¹ï¼š
    - æ–‡ä»¶ä½“ç§¯å¤§
    - åœºæ™¯è°ƒæ•´éœ€è¦é‡æ–°å¯¼å‡º
    - éš¾ä»¥è°ƒè¯•ï¼ˆæ•°æ®å†—ä½™ï¼‰
```

**æ¨è**ï¼šä½¿ç”¨æ–¹æ¡ˆ Aï¼ˆå¯¼å‡º IDï¼‰ï¼Œé…åˆè¿è¡Œæ—¶çš„ Marker æŸ¥è¯¢ç³»ç»Ÿ

---

#### è¿è¡Œæ—¶æŸ¥è¯¢

```csharp
public class MarkerQueryService
{
    private Dictionary<string, Marker> _markerCache;
    
    public Marker GetMarker(string id)
    {
        if (_markerCache.TryGetValue(id, out var marker))
            return marker;
        
        // ä»åœºæ™¯ä¸­æŸ¥è¯¢ï¼ˆé¦–æ¬¡æŸ¥è¯¢æ—¶ï¼‰
        marker = SceneMarkerRegistry.Find(id);
        if (marker != null)
            _markerCache[id] = marker;
        
        return marker;
    }
    
    public Vector3[] GetAreaPolygon(string areaId)
    {
        var marker = GetMarker(areaId);
        if (marker?.Type != MarkerType.Area)
            throw new InvalidOperationException($"Marker {areaId} is not an Area");
        
        return (Vector3[])marker.ShapeData;
    }
}
```

---

## å…­ã€æœ€ä½³å®è·µ

### 6.1 æ¨èçš„åœºæ™¯ç»„ç»‡æ–¹å¼

#### Hierarchy ç»“æ„

```
Scene
â”œâ”€ Environmentï¼ˆç¯å¢ƒç¾æœ¯ï¼‰
â”‚  â”œâ”€ Buildings
â”‚  â”œâ”€ Props
â”‚  â””â”€ Lighting
â”‚
â”œâ”€ Markersï¼ˆè“å›¾æ ‡è®°ï¼‰â˜…
â”‚  â”œâ”€ Combatï¼ˆæˆ˜æ–—ç›¸å…³ï¼‰
â”‚  â”‚  â”œâ”€ spawn_hallway_01 (Area)
â”‚  â”‚  â”œâ”€ spawn_hallway_02 (Area)
â”‚  â”‚  â””â”€ trigger_ambush (Area)
â”‚  â”‚
â”‚  â”œâ”€ Patrolï¼ˆå·¡é€»è·¯å¾„ï¼‰
â”‚  â”‚  â”œâ”€ patrol_guard_a (Path)
â”‚  â”‚  â””â”€ patrol_guard_b (Path)
â”‚  â”‚
â”‚  â””â”€ Interactionï¼ˆäº¤äº’ç‚¹ï¼‰
â”‚     â”œâ”€ chest_01 (Point)
â”‚     â””â”€ door_trigger (Point)
â”‚
â”œâ”€ GameLogicï¼ˆæ¸¸æˆé€»è¾‘ï¼‰
â”‚  â””â”€ BlueprintControllerï¼ˆæŒ‚è½½ Playbook çš„å¯¹è±¡ï¼‰
â”‚
â””â”€ _EditorOnlyï¼ˆç¼–è¾‘å™¨ä¸“ç”¨ï¼Œè¿è¡Œæ—¶éšè—ï¼‰
   â””â”€ PreviewObjects
```

**å…³é”®**ï¼š
- æ‰€æœ‰ Marker é›†ä¸­åœ¨ `Markers` èŠ‚ç‚¹ä¸‹ï¼Œæ–¹ä¾¿ç®¡ç†
- æŒ‰åŠŸèƒ½åˆ†ç±»ï¼ˆCombatã€Patrolã€Interaction ç­‰ï¼‰
- å‘½åè§„èŒƒç»Ÿä¸€ï¼Œä¾¿äºæœç´¢å’Œå¼•ç”¨

---

### 6.2 æ¨èçš„è“å›¾ç»“æ„

#### æ¨¡å—åŒ–è®¾è®¡

```
Blueprint ç»“æ„ï¼š

[Module 1: åˆå§‹åŒ–]
  [Flow.Start]
      â†“
  [Spawn.Preset: å®ˆå«]
      â†“
  [Behavior.Assign: å¾…æœº]

[Module 2: åŸ‹ä¼è§¦å‘]
  [Trigger.EnterArea: èµ°å»Š]
      â†“
  [Location.RandomInArea: åˆ·æ€ªåŒº]
      â†“
  [Monster.Pool: å“¥å¸ƒæ—]
      â†“
  [Spawn.Execute]
      â†“
  [Behavior.Assign: è¿½å‡»]

[Module 3: æˆ˜æ–—å®Œæˆ]
  [Condition.AllDead]
      â†“
  [VFX.ScreenFlash]
      â†“
  [Flow.OpenDoor]
```

**åŸåˆ™**ï¼š
- æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡èŠ‚ç‚¹
- ä½¿ç”¨æ³¨é‡ŠèŠ‚ç‚¹æ ‡æ³¨æ¨¡å—è¾¹ç•Œ
- é¿å…è¿‡é•¿çš„è¿çº¿ï¼ˆè¶…è¿‡ 5 ä¸ªèŠ‚ç‚¹è€ƒè™‘æ‹†åˆ†ï¼‰

---

### 6.3 å¸¸è§åœºæ™¯ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šåŸºç¡€åŸ‹ä¼æˆ˜

**åœºæ™¯è®¾ç½®**ï¼š
```
Markers:
  - trigger_ambush (Area)ï¼šç©å®¶è§¦å‘åŒº
  - spawn_ambush (Area)ï¼šæ€ªç‰©åˆ·æ–°åŒº
```

**è“å›¾é…ç½®**ï¼š
```
[Trigger.EnterArea]
  â””â”€ area: trigger_ambush
      â†“
[Location.RandomInArea]
  â”œâ”€ area: spawn_ambush
  â”œâ”€ count: 6
  â””â”€ minDistance: 3.0
      â†“
[Monster.Pool]
  â””â”€ monsters: [Goblin_Warrior]
      â†“
[Spawn.Execute]
      â†“
[Behavior.Assign]
  â””â”€ behaviorType: Guard
```

---

#### ç¤ºä¾‹ 2ï¼šå¤šæ³¢æ¬¡é˜²å®ˆæˆ˜

**åœºæ™¯è®¾ç½®**ï¼š
```
Markers:
  - spawn_wave1 (Area)ï¼šç¬¬ä¸€æ³¢åˆ·æ€ªåŒº
  - spawn_wave2 (Area)ï¼šç¬¬äºŒæ³¢åˆ·æ€ªåŒº
  - spawn_wave3 (Area)ï¼šç¬¬ä¸‰æ³¢åˆ·æ€ªåŒº
```

**è“å›¾é…ç½®**ï¼š
```
[Flow.Start]
      â†“
[Spawn.Wave]
  â”œâ”€ area: spawn_wave1
  â”œâ”€ waveCount: 3
  â”œâ”€ monstersPerWave: 5
  â””â”€ waveInterval: 10.0
      â†“ outï¼ˆå…¨éƒ¨æ³¢æ¬¡å®Œæˆï¼‰
      â†“
[Spawn.Wave]
  â”œâ”€ area: spawn_wave2
  â”œâ”€ waveCount: 2
  â”œâ”€ monstersPerWave: 8
  â””â”€ waveInterval: 15.0
      â†“
[Boss.Spawn]
  â””â”€ bossId: "Boss_OrcChieftain"
```

---

#### ç¤ºä¾‹ 3ï¼šå·¡é€»å®ˆå« + è­¦æˆ’

**åœºæ™¯è®¾ç½®**ï¼š
```
Markers:
  - guard_spawn (Point)ï¼šå®ˆå«å‡ºç”Ÿç‚¹
  - patrol_route (Path)ï¼šå·¡é€»è·¯å¾„ï¼ˆ5ä¸ªç‚¹ï¼‰
```

**è“å›¾é…ç½®**ï¼š
```
[Flow.Start]
      â†“
[Spawn.Preset]
  â””â”€ presetPoints: guard_spawn
      â†“
[Behavior.Assign]
  â”œâ”€ behaviorType: Patrol
  â”œâ”€ patrolRoute: patrol_route
  â”œâ”€ loopPatrol: true
  â””â”€ guardRadius: 8.0  â˜… å·¡é€»æ—¶ä¹Ÿä¼šè­¦æˆ’
```

---

## ä¸ƒã€ç¼–è¾‘å™¨é¢„è§ˆåˆ·æ–°ä¸ä¸€è‡´æ€§ç­–ç•¥ï¼ˆæ–°å¢ï¼‰

### 7.1 è®¾è®¡ç›®æ ‡

å›´ç»• `Location.RandomArea` çš„ Scene ç»¿è‰²é¢„è§ˆï¼Œç¼–è¾‘å™¨å±‚éµå¾ªä»¥ä¸‹ç›®æ ‡ï¼š

- **å‡†ç¡®æ€§**ï¼šMarker å‡ ä½•ã€èŠ‚ç‚¹å‚æ•°ã€ç»‘å®šå…³ç³»å˜åŒ–åï¼Œé¢„è§ˆåº”åŠæ—¶åŒæ­¥ã€‚
- **æ€§èƒ½**ï¼šé¿å…æ¯æ¬¡å˜åŒ–éƒ½å…¨é‡é‡ç®—ï¼Œä¼˜å…ˆåšåˆ° marker/node ç²’åº¦åˆ·æ–°ã€‚
- **ç¨³å®šæ€§**ï¼šé¢å¯¹ Undo/Redoã€èŠ‚ç‚¹å¢åˆ ã€æ¨¡æ¿å®ä¾‹åŒ–ç­‰å¤æ‚è·¯å¾„ï¼Œç¼“å­˜è¦å¯æ”¶æ•›ã€‚

### 7.2 äº‹ä»¶é©±åŠ¨è„åˆ·æ–°ä¸»é“¾è·¯

å½“å‰å®ç°ä»è½®è¯¢å¼åˆ·æ–°åˆ‡æ¢ä¸º**äº‹ä»¶é©±åŠ¨ + è„æ ‡è®° + åˆå¹¶è°ƒåº¦**ï¼š

1. äº‹ä»¶æºï¼ˆèŠ‚ç‚¹å±æ€§å˜æ›´ã€å±‚çº§å˜åŒ–ã€Undo å±æ€§ä¿®æ”¹ã€èŠ‚ç‚¹å¢åˆ ç­‰ï¼‰åªåš `MarkPreviewDirty...`ã€‚
2. è„èŠ‚ç‚¹å…ˆè¿›å…¥é›†åˆï¼Œä½¿ç”¨ `EditorApplication.delayCall` åˆå¹¶åˆ°åŒä¸€æ‰¹æ¬¡ã€‚
3. `FlushDirtyPreviews` æŒ‰â€œå…¨é‡ä¼˜å…ˆï¼Œå•èŠ‚ç‚¹æ¬¡ä¹‹â€æ‰§è¡Œã€‚
4. æ‰¹é‡ç§»é™¤é¢„è§ˆåç»Ÿä¸€é‡ç»˜ï¼Œé¿å…å¤šæ¬¡ `SceneView.RepaintAll`ã€‚

è¿™æ¡é“¾è·¯ä¿è¯äº†ï¼š
- æ— ç©ºé—²è½®è¯¢å¼€é”€ï¼›
- åŒå¸§å¤šäº‹ä»¶å¯åˆå¹¶ï¼›
- åˆ é™¤èŠ‚ç‚¹æ—¶é¢„è§ˆå¯åŠæ—¶æ¸…ç†ã€‚

### 7.3 ç²¾å‡†åˆ·æ–°ä¼˜åŒ–ç‚¹

ä¸ºè¿›ä¸€æ­¥å‡å°‘ä¸å¿…è¦è®¡ç®—ï¼Œå½“å‰å®ç°åŒ…å«ä¸¤é¡¹å…³é”®ä¼˜åŒ–ï¼š

1. **Markerâ†’Node åå‘ç´¢å¼•**  
   - ç»´æŠ¤ `markerId -> nodeIds` ä¸ `nodeId -> markerId`ã€‚  
   - æŒ‰ marker åˆ·æ–°æ—¶ä¼˜å…ˆç´¢å¼•å‘½ä¸­ï¼Œé¿å…å…¨å›¾æ‰«æã€‚  

2. **èŠ‚ç‚¹ç­¾åçŸ­è·¯ï¼ˆNode Signature Skipï¼‰**  
   - å¯¹ `Location.RandomArea` è®¡ç®—ç­¾åï¼ˆèŠ‚ç‚¹å‚æ•° + å…³è” Marker å‡ ä½•ç­¾åï¼‰ã€‚  
   - è‹¥ç­¾åæœªå˜åŒ–ä¸”å·²æœ‰ç¼“å­˜ï¼Œç›´æ¥è·³è¿‡ `GenerateLocationPreview`ã€‚

### 7.4 ä¸€è‡´æ€§ä¸å…œåº•ç­–ç•¥

ä¸ºäº†é¿å…â€œå¿«ä½†ä¸å‡†â€ï¼Œè®¾è®¡ä¸­ä¿ç•™äº†å¿…è¦å…œåº•ï¼š

- å›¾ç»“æ„å¿«ç…§ï¼ˆèŠ‚ç‚¹ ID é›† + å­å›¾è®¡æ•°ï¼‰ç”¨äºè¯†åˆ«å¢åˆ èŠ‚ç‚¹ï¼›
- ç´¢å¼•ç©ºå‘½ä¸­æ—¶å…è®¸ä¸€æ¬¡é‡å»ºåé‡è¯•ï¼›
- å±‚çº§å˜åŒ–è·¯å¾„ä¸‹ï¼Œè‹¥ marker ç²¾å‡†å‘½ä¸­å¤±è´¥ï¼Œå¯å›é€€åˆ° RandomArea èŒƒå›´åˆ·æ–°ï¼›
- `BlueprintPreviewManager` åœ¨å…¨é‡åˆ·æ–°æ—¶æ¸…ç† stale preview å’Œç­¾åç¼“å­˜ã€‚

è¯¥ç­–ç•¥çš„æœ¬è´¨æ˜¯ï¼š**é»˜è®¤èµ°ç²¾å‡†è·¯å¾„ï¼Œå¼‚å¸¸è·¯å¾„å¿«é€Ÿæ”¶æ•›ï¼Œä¸ç‰ºç‰²æ­£ç¡®æ€§**ã€‚

---

## å…«ã€Blueprint å®šä½ä¸ç¼–è¾‘å™¨å·¥å…·è¾¹ç•Œ

### 8.1 Blueprint çš„æ ¸å¿ƒå®šä½

**Blueprint = è¿è¡Œæ—¶è§„åˆ™å›¾çš„ç¼–è¾‘æ—¶æè¿°ã€‚**

Blueprint æè¿°çš„æ˜¯"è¿è¡Œæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ"â€”â€”è¡ŒåŠ¨åˆ—è¡¨ã€è§¦å‘æ¡ä»¶ã€æ•°æ®æµå…³ç³»ã€‚å®ƒ**ä¸æ˜¯**ç¼–è¾‘æ—¶çš„æ“ä½œå·¥å…·ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Unity Editor é¡¹ç›®      â”‚          â”‚   è¿è¡Œæ—¶é¡¹ç›®             â”‚
â”‚                         â”‚   å¯¼å‡º    â”‚   (å¸§åŒæ­¥å¼•æ“)           â”‚
â”‚  Â· Blueprint ç¼–è¾‘å™¨     â”‚ â•â•â•â•â•â•â•â–º â”‚                         â”‚
â”‚  Â· ç¼–è¾‘å™¨å·¥å…·ï¼ˆè¾…åŠ©ï¼‰    â”‚  Playbook â”‚  Â· æ¶ˆè´¹ Playbook æ•°æ®   â”‚
â”‚                         â”‚  (JSON)   â”‚  Â· æ‰§è¡Œè¡ŒåŠ¨é€»è¾‘          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å…³é”®çº¦æŸï¼ˆæ¥è‡ªåœºæ™¯è“å›¾ç³»ç»Ÿæ€»ä½“è®¾è®¡ Â§4.1ï¼‰ï¼š
- è“å›¾çš„å¯è§†åŒ–å›¾ï¼ˆèŠ‚ç‚¹/è¿çº¿ï¼‰æ˜¯**çº¯ç¼–è¾‘å™¨æ¦‚å¿µ**ï¼Œè¿è¡Œæ—¶ä»æ¥çœ‹ä¸åˆ°
- è¿è¡Œæ—¶çœ‹åˆ°çš„æ˜¯ä¸€ä»½**çº¯æ•°æ®**â€”â€”è¡ŒåŠ¨åˆ—è¡¨ + æ¡ä»¶å…³ç³» + å±æ€§å‚æ•°
- å¯¼å‡ºæ­¥éª¤æ˜¯æ¡¥æ¢ï¼Œè´Ÿè´£æŠŠ"å›¾"ç¼–è¯‘æˆ"æ•°æ®"

### 8.2 ç¼–è¾‘å™¨å·¥å…· vs Blueprint èŠ‚ç‚¹çš„åˆ¤å®šè§„åˆ™

å½“è®¾è®¡ä¸€ä¸ªæ–°åŠŸèƒ½æ—¶ï¼Œç”¨ä»¥ä¸‹é—®é¢˜åˆ¤æ–­å®ƒåº”è¯¥æ˜¯"ç¼–è¾‘å™¨å·¥å…·"è¿˜æ˜¯"Blueprint èŠ‚ç‚¹"ï¼š

| åˆ¤å®šé—®é¢˜ | ç¼–è¾‘å™¨å·¥å…· | Blueprint èŠ‚ç‚¹ |
|---------|-----------|---------------|
| è¿è¡Œæ—¶éœ€è¦æ‰§è¡Œå—ï¼Ÿ | âŒ ä¸éœ€è¦ | âœ… éœ€è¦ |
| äº§ç‰©æ˜¯ä»€ä¹ˆï¼Ÿ | Markerï¼ˆæŒä¹…åŒ–åˆ°åœºæ™¯ï¼‰ | Playbook ä¸­çš„ Action æ•°æ® |
| ç­–åˆ’éœ€è¦åå¤è¿­ä»£å—ï¼Ÿ | âœ… åå¤è°ƒæ•´ç›´åˆ°æ»¡æ„ | âŒ é…å¥½å‚æ•°å³å¯ |
| æœ€ç»ˆç»“æœæ˜¯ç¡®å®šçš„å—ï¼Ÿ | âœ… å›ºå®šä¸‹æ¥ | âŒ å¯èƒ½æ¯æ¬¡è¿è¡Œä¸åŒ |

**å…¸å‹ç¤ºä¾‹**ï¼š

| åŠŸèƒ½ | å½’å± | ç†ç”± |
|------|------|------|
| åœ¨åŒºåŸŸå†…éšæœºæ’’ç‚¹ â†’ å¾®è°ƒ â†’ ç¡®è®¤ | **ç¼–è¾‘å™¨å·¥å…·** | ç­–åˆ’è¿­ä»£è¿‡ç¨‹ï¼Œäº§ç‰©æ˜¯ PointMarker |
| è¿è¡Œæ—¶åœ¨åŒºåŸŸå†…éšæœºç”Ÿæˆä½ç½® | **Blueprint èŠ‚ç‚¹** | æ¯æ¬¡ç©éƒ½ä¸åŒï¼Œè¿è¡Œæ—¶æ‰§è¡Œ |
| é€‰æ‹©é˜µå‹ï¼ˆæ–¹é˜µ/åœ†é˜µï¼‰ç”Ÿæˆç‚¹ä½ | **ç¼–è¾‘å™¨å·¥å…·** | è¾…åŠ©æ‘†æ”¾ï¼Œäº§ç‰©æ˜¯ PointMarker |
| é…ç½®æ€ªç‰©æ¨¡æ¿å’Œæƒé‡ | **Blueprint èŠ‚ç‚¹** | è¿è¡Œæ—¶æ¶ˆè´¹çš„æ•°æ® |
| å®šä¹‰è§¦å‘æ¡ä»¶å’Œæ—¶åº | **Blueprint èŠ‚ç‚¹** | è¿è¡Œæ—¶é€»è¾‘ |

### 8.3 é¢„è®¾åˆ·æ€ª vs è¿è¡Œæ—¶éšæœºåˆ·æ€ªâ€”â€”ä¸¤æ¡è·¯å¾„

æ ¹æ® Blueprint å®šä½ï¼Œåˆ·æ€ªå­˜åœ¨ä¸¤æ¡å®Œå…¨ä¸åŒçš„è·¯å¾„ï¼š

#### è·¯å¾„ Aï¼šé¢„è®¾åˆ·æ€ªï¼ˆç­–åˆ’ç²¾ç¡®æ‘†æ”¾ï¼Œæ¯æ¬¡ç©éƒ½ä¸€æ ·ï¼‰

```
â•â•â• ç¼–è¾‘å™¨å±‚ â•â•â•

SceneView: AreaMarkerï¼ˆç©ºç™½åŒºåŸŸï¼‰
    â†“
ä½ç½®ç”Ÿæˆå·¥å…·ï¼ˆç¼–è¾‘å™¨å·¥å…·ï¼Œé Blueprint èŠ‚ç‚¹ï¼‰
    â”œâ”€ éšæœºç”Ÿæˆ / é˜µå‹ç”Ÿæˆ / æ‰‹åŠ¨æ”¾ç½®
    â”œâ”€ é¢„è§ˆç»¿è‰²ç‚¹ â†’ ä¸æ»¡æ„ â†’ é‡æ–°ç”Ÿæˆ
    â”œâ”€ å¾®è°ƒå•ä¸ªç‚¹çš„ä½ç½®å’Œæœå‘
    â””â”€ ç¡®è®¤ â†’ å›ºåŒ–ä¸º N ä¸ª PointMarkerï¼ˆæŒä¹…åŒ–åˆ°åœºæ™¯ï¼‰

â•â•â• Blueprint å±‚ â•â•â•

[Trigger] â”€â”€â†’ [Spawn.Preset] â”€â”€â†’ [Behavior.Assign]
                    â”‚
                    â”œâ”€ presetPoints: ç»‘å®šé‚£äº› PointMarker
                    â””â”€ monsterTemplate: æ€ªç‰©æ¨¡æ¿

â•â•â• å¯¼å‡º â•â•â•

Playbook.json: åŒ…å«å›ºå®šåæ ‡ + æ€ªç‰©æ¨¡æ¿ + è¡Œä¸ºé…ç½®
è¿è¡Œæ—¶ï¼šåœ¨è¿™äº›å›ºå®šä½ç½®æ”¾ç½®æ€ªç‰©ï¼ˆæ‰€è§å³æ‰€å¾—ï¼‰
```

#### è·¯å¾„ Bï¼šè¿è¡Œæ—¶éšæœºåˆ·æ€ªï¼ˆæ¯æ¬¡ç©ä½ç½®ä¸åŒï¼‰

```
â•â•â• ç¼–è¾‘å™¨å±‚ â•â•â•

SceneView: AreaMarkerï¼ˆå®šä¹‰éšæœºèŒƒå›´ï¼‰

â•â•â• Blueprint å±‚ â•â•â•

[Monster.Pool] â”€â”€monstersâ”€â”€â†’ [Spawn.Execute]
                                    â†‘
[Location.RandomArea] â”€â”€positionsâ”€â”€â†’â”˜
  ç»‘å®š: AreaMarker
  count / minSpacing ç­‰å‚æ•°

â•â•â• å¯¼å‡º â•â•â•

Playbook.json: åŒ…å«åŒºåŸŸå‚æ•° + éšæœºç®—æ³•é…ç½®
è¿è¡Œæ—¶ï¼šæ¯æ¬¡æ‰§è¡Œæ—¶åœ¨åŒºåŸŸå†…éšæœºç”Ÿæˆä½ç½®
```

#### ä¸¤æ¡è·¯å¾„å¯¹æ¯”

| ç»´åº¦ | è·¯å¾„ Aï¼ˆé¢„è®¾åˆ·æ€ªï¼‰ | è·¯å¾„ Bï¼ˆè¿è¡Œæ—¶éšæœºï¼‰ |
|------|-------------------|---------------------|
| ä½ç½®ç¡®å®šæ—¶æœº | ç¼–è¾‘æ—¶ï¼ˆç­–åˆ’ç¡®è®¤åå›ºå®šï¼‰ | è¿è¡Œæ—¶ï¼ˆæ¯æ¬¡ä¸åŒï¼‰ |
| ç©ºé—´æ•°æ®è½½ä½“ | PointMarkerï¼ˆåœºæ™¯æŒä¹…åŒ–ï¼‰ | AreaMarker å‚æ•°ï¼ˆè¿è¡Œæ—¶è®¡ç®—ï¼‰ |
| ç­–åˆ’æ§åˆ¶åº¦ | å®Œå…¨æ§åˆ¶æ¯ä¸ªç‚¹çš„ä½ç½®/æœå‘ | åªæ§åˆ¶åŒºåŸŸå’Œå‚æ•° |
| é¢„è§ˆä¸€è‡´æ€§ | é¢„è§ˆ = æœ€ç»ˆç»“æœ | é¢„è§ˆä»…ä¾›å‚è€ƒ |
| é€‚ç”¨åœºæ™¯ | Boss å‡ºåœºã€åŸ‹ä¼æ€ªã€å®ˆå« NPC | Roguelikeã€éšæœºé­é‡ |
| Blueprint èŠ‚ç‚¹ | `Spawn.Preset` | `Location.RandomArea` + `Spawn.Execute` |

### 8.4 ä½ç½®ç”Ÿæˆå·¥å…·çš„ç­–åˆ’å·¥ä½œæµ

ä½ç½®ç”Ÿæˆå·¥å…·æ˜¯**ç¼–è¾‘å™¨è¾…åŠ©å·¥å…·**ï¼Œå¸®åŠ©ç­–åˆ’å¿«é€Ÿåœ¨ AreaMarker å†…é“ºè®¾ PointMarkerã€‚

> **è®¾è®¡å†³ç­–ï¼ˆv1.2ï¼‰**ï¼šå–æ¶ˆ"ä¸´æ—¶é¢„è§ˆ â†’ å›ºåŒ–"ä¸¤æ­¥æœºåˆ¶ï¼Œæ”¹ä¸ºç›´æ¥ç”ŸæˆçœŸå® PointMarkerã€‚
> åŸå› ï¼šä¸´æ—¶é¢„è§ˆçš„è‡ªå®šä¹‰ Handle ä¸ Gizmo ç®¡çº¿çš„ Interactive Handle å†²çªï¼Œä¸”å¢åŠ äº†ä¸å¿…è¦çš„å¤æ‚åº¦ã€‚
> ç›´æ¥ç”Ÿæˆåï¼Œç­–åˆ’ç”¨ Unity åŸç”Ÿ W/E/R å·¥å…·å¾®è°ƒï¼Œé›¶å†²çªã€é›¶é¢å¤– UIã€‚

```
ç­–åˆ’å·¥ä½œæµï¼š

ç¬¬1æ­¥ï¼šé€‰æ‹©åŒºåŸŸ
  SceneView ä¸­é€‰ä¸­ä¸€ä¸ª AreaMarker

ç¬¬2æ­¥ï¼šé€‰æ‹©ç”Ÿæˆç­–ç•¥ + æ•°é‡
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ä½ç½®ç”Ÿæˆå·¥å…·              â”‚
  â”‚                         â”‚
  â”‚ ç”Ÿæˆç­–ç•¥: [éšæœº â–¼]      â”‚  â† éšæœº / åœ†å½¢é˜µå‹
  â”‚ æ•°é‡: [5]               â”‚
  â”‚ æœ€å°é—´è·: [2.0]         â”‚
  â”‚                         â”‚
  â”‚ â˜‘ è‡ªåŠ¨æ·»åŠ æ ‡æ³¨: [Spawn] â”‚  â† å¯é€‰ï¼Œè‡ªåŠ¨æŒ‚ SpawnAnnotation
  â”‚                         â”‚
  â”‚ [éšæœºç”Ÿæˆ]              â”‚  â† æ¯æ¬¡ç‚¹å‡»ï¼šæ¢ç§å­ + æ¸…é™¤æ—§ç‚¹ + ç”Ÿæˆæ–°ç‚¹
  â”‚                         â”‚
  â”‚ å·²æœ‰ 5 ä¸ªå­ PointMarker â”‚
  â”‚ [æ¸…é™¤å…¨éƒ¨å­ç‚¹ä½]         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¬¬3æ­¥ï¼šå¾®è°ƒä½ç½®å’Œæœå‘
  â†’ Hierarchy ä¸­é€‰ä¸­æŸä¸ªå­ PointMarker
  â†’ W ç§»åŠ¨ / E æ—‹è½¬ï¼ˆUnity åŸç”Ÿæ“ä½œï¼‰
  â†’ ä¸æ»¡æ„ï¼Ÿå›åˆ° AreaMarker â†’ [éšæœºç”Ÿæˆ]ï¼ˆé‡æ–°æ¥è¿‡ï¼‰

ç¬¬4æ­¥ï¼šæ ‡æ³¨å±æ€§ï¼ˆå¯é€‰ï¼‰
  â†’ é€‰ä¸­ PointMarker â†’ Inspector ä¸­ç¼–è¾‘ SpawnAnnotation
  â†’ è®¾ç½® MonsterId / Level / Behavior ç­‰
  â†’ SceneView ä¸­è¯¥ç‚¹ä½é¢œè‰²å’Œæ ‡ç­¾éšæ ‡æ³¨å˜åŒ–

ç¬¬5æ­¥ï¼šBlueprint ä¸­ç¼–æ’
  â†’ åˆ›å»º Spawn.Preset èŠ‚ç‚¹ï¼Œç»‘å®š AreaMarker
  â†’ å¯¼å‡ºæ—¶è‡ªåŠ¨æ”¶é›†å­ PointMarker + æ ‡æ³¨æ•°æ®
```

**å…³é”®è®¾è®¡åŸåˆ™**ï¼š
- ç”Ÿæˆå·¥å…·çš„äº§ç‰©æ˜¯ **PointMarker**ï¼ˆåœºæ™¯ç©ºé—´æ•°æ®ï¼‰ï¼Œä¸æ˜¯ Blueprint æ•°æ®
- **ç›´æ¥ç”ŸæˆçœŸå® PointMarker**ï¼Œæ— ä¸´æ—¶é¢„è§ˆï¼Œæ‰€è§å³æ‰€å¾—
- å¾®è°ƒä½¿ç”¨ Unity åŸç”Ÿ W/E/R å·¥å…·ï¼Œé›¶ Handle å†²çª
- æ ‡æ³¨å±æ€§ï¼ˆæ€ªç‰© IDã€è¡Œä¸ºç­‰ï¼‰é€šè¿‡ **MarkerAnnotation ç»„ä»¶**é™„åŠ ï¼Œå±äº SceneView å±‚
- æ•´ä¸ªè¿‡ç¨‹ä¸æ¶‰åŠ Blueprintï¼Œçº¯ç²¹æ˜¯ SceneView å±‚çš„æ“ä½œ
- è¯¦è§ [æ ‡è®°æ ‡æ³¨ç³»ç»Ÿè®¾è®¡](æ ‡è®°æ ‡æ³¨ç³»ç»Ÿè®¾è®¡.md)

### 8.5 åæ¨¡å¼ï¼šæ··æ·†ç¼–è¾‘æ—¶ä¸è¿è¡Œæ—¶

#### âŒ åæ¨¡å¼ï¼šæŠŠç¼–è¾‘æ—¶è¿­ä»£å·¥å…·åšæˆ Blueprint èŠ‚ç‚¹

```
é”™è¯¯è®¾è®¡ï¼š
  [Location.RandomArea] ä½œä¸º Blueprint èŠ‚ç‚¹
  ç­–åˆ’åœ¨ç¼–è¾‘å™¨ä¸­é¢„è§ˆ 10 ä¸ªç»¿è‰²ç‚¹
  ä½† Spawn.Execute è¿è¡Œæ—¶åªç”¨äº† 4 ä¸ª
  â†’ é¢„è§ˆå’Œæœ€ç»ˆç»“æœä¸ä¸€è‡´ï¼Œé¢„è§ˆå˜æˆ"éª—äººçš„"
```

**ä¸ºä»€ä¹ˆé”™**ï¼š
- ç­–åˆ’çœ‹åˆ°çš„é¢„è§ˆ â‰  è¿è¡Œæ—¶ç»“æœï¼Œç ´åä¿¡ä»»
- ç­–åˆ’æ— æ³•å¾®è°ƒå•ä¸ªç‚¹çš„ä½ç½®
- "éšæœº â†’ æ»¡æ„ â†’ å›ºå®š"çš„è¿­ä»£æµç¨‹æ— æ³•å®ç°

#### âœ… æ­£ç¡®åšæ³•

```
ç¼–è¾‘æ—¶ï¼šä½ç½®ç”Ÿæˆå·¥å…·ï¼ˆç¼–è¾‘å™¨å·¥å…·ï¼‰
  â†’ ç­–åˆ’åå¤éšæœº/å¾®è°ƒ â†’ ç¡®è®¤ â†’ å›ºåŒ–ä¸º PointMarker
  â†’ é¢„è§ˆ = æœ€ç»ˆç»“æœ

è¿è¡Œæ—¶ï¼šBlueprint èŠ‚ç‚¹å¼•ç”¨è¿™äº› PointMarker
  â†’ Spawn.Preset åœ¨å›ºå®šä½ç½®æ”¾ç½®æ€ªç‰©
  â†’ æ‰€è§å³æ‰€å¾—
```

**åˆ¤å®šå£è¯€**ï¼š
> å¦‚æœç­–åˆ’éœ€è¦"çœ‹åˆ° â†’ è°ƒæ•´ â†’ å†çœ‹ â†’ æ»¡æ„ â†’ å›ºå®š"ï¼Œé‚£å®ƒæ˜¯**ç¼–è¾‘å™¨å·¥å…·**ã€‚
> å¦‚æœè¿è¡Œæ—¶éœ€è¦"è¯»å–å‚æ•° â†’ æ‰§è¡Œé€»è¾‘ â†’ äº§ç”Ÿç»“æœ"ï¼Œé‚£å®ƒæ˜¯**Blueprint èŠ‚ç‚¹**ã€‚

---

## ä¹ã€PropertyType æ‰©å±•ï¼šStructList ç»“æ„åŒ–åˆ—è¡¨

### 9.1 èƒŒæ™¯

`Spawn.Wave` çš„æ³¢æ¬¡é…ç½®éœ€è¦å­˜å‚¨ç»“æ„åŒ–åˆ—è¡¨æ•°æ®ï¼ˆæ¯æ³¢çš„åˆ·æ€ªæ•°é‡ã€é—´éš”ã€æ€ªç‰©ç­›é€‰ç­‰ï¼‰ï¼Œä½†åŸæœ‰ `PropertyType` åªæ”¯æŒæ ‡é‡ç±»å‹ï¼Œå¯¼è‡´åªèƒ½ç”¨ `Prop.String` å­˜ JSON å­—ç¬¦ä¸²ï¼Œç­–åˆ’æ— æ³•åœ¨ Inspector ä¸­ç›´è§‚ç¼–è¾‘ã€‚

### 9.2 è®¾è®¡æ–¹æ¡ˆ

åœ¨ä¸ä¿®æ”¹ NodeGraph å±‚çš„å‰æä¸‹ï¼Œåœ¨ Core å±‚å’Œ Editor å±‚åˆ†åˆ«æ‰©å±•ï¼š

| å±‚ | æ”¹åŠ¨ | Unity ä¾èµ– |
|----|------|-----------|
| Core å±‚ | `PropertyType` æ–°å¢ `StructList`ï¼›`PropertyDefinition` æ–°å¢ `StructFields`ã€`SummaryFormat` | æ—  |
| Core å±‚ | `Prop` å·¥å‚æ–°å¢ `Prop.StructList()` æ–¹æ³• | æ—  |
| Editor å±‚ | `ActionNodeInspectorDrawer` æ–°å¢ `DrawStructListField()`ï¼ˆå¯æ’åºã€å¯å¢åˆ åˆ—è¡¨ï¼‰ | æœ‰ |
| Editor å±‚ | `ActionContentRenderer` æ–°å¢ StructList æ‘˜è¦æ˜¾ç¤º | æ—  |
| Editor å±‚ | `BlueprintExporter` æ–°å¢ StructList åºåˆ—åŒ–ï¼ˆ`ValueType = "json"`ï¼‰ | æœ‰ |
| Editor å±‚ | `StructListJsonHelper` æ–°å¢æ–‡ä»¶ï¼Œè´Ÿè´£ JSON â†” `List<Dictionary<string, object>>` è½¬æ¢ | æ—  |

### 9.3 å­˜å‚¨ç­–ç•¥

StructList åœ¨ `PropertyBag` ä¸­ä»¥ JSON å­—ç¬¦ä¸²å½¢å¼å­˜å‚¨ï¼Œé›¶ä¾µå…¥ï¼š

```csharp
// PropertyBag ä¸éœ€è¦æ”¹åŠ¨ï¼ŒStructList ä»¥ string å­˜å‚¨
string json = bag.Get<string>("waves") ?? "[]";
bag.Set("waves", "[{\"count\":5,...}]");
```

ç¼–è¾‘å™¨å±‚åœ¨ç»˜åˆ¶æ—¶è´Ÿè´£ JSON â†” `List<Dictionary<string, object>>` çš„è½¬æ¢ã€‚

### 9.4 ä½¿ç”¨ç¤ºä¾‹

```csharp
// SpawnWaveDef ä¸­çš„æ³¢æ¬¡é…ç½®
Prop.StructList("waves", "æ³¢æ¬¡é…ç½®",
    fields: new[]
    {
        Prop.Int("count", "åˆ·æ€ªæ•°é‡", defaultValue: 5, min: 1, max: 50),
        Prop.Int("intervalTicks", "é—´éš”(Tick)", defaultValue: 60, min: 0, max: 600),
        Prop.Enum("monsterFilter", "æ€ªç‰©ç­›é€‰",
            new[] { "All", "Normal", "Elite", "Boss", "Minion", "Special" },
            defaultValue: "All"),
    },
    summaryFormat: "æ³¢æ¬¡: {count} æ³¢",
    order: 1)
```

### 9.5 æ˜¾ç¤ºæ•ˆæœ

èŠ‚ç‚¹ç”»å¸ƒä¸­åªæ˜¾ç¤ºæ‘˜è¦æ–‡æœ¬ï¼ˆå¦‚"æ³¢æ¬¡: 3 æ³¢"ï¼‰ï¼Œè¯¦ç»†ç¼–è¾‘åœ¨ä¾§è¾¹ Inspector é¢æ¿ä¸­è¿›è¡Œï¼Œæ”¯æŒåˆ—è¡¨å…ƒç´ çš„æ·»åŠ ã€åˆ é™¤ã€ä¸Šç§»ã€ä¸‹ç§»æ“ä½œã€‚

å¯¼å‡ºæ ¼å¼ï¼š`ValueType = "json"`ï¼Œå€¼ä¸º JSON æ•°ç»„å­—ç¬¦ä¸²ï¼Œè¿è¡Œæ—¶ç›´æ¥è§£æã€‚

---

## åã€Trigger èŠ‚ç‚¹ç»Ÿä¸€ä¸ºæ¡ä»¶ç­‰å¾…èŠ‚ç‚¹

### 10.1 èƒŒæ™¯

åŸ `Trigger.EnterArea` æ˜¯"è‡ªå¯åŠ¨äº‹ä»¶æº"â€”â€”æ²¡æœ‰ `in` ç«¯å£ï¼Œè“å›¾å¯åŠ¨åè‡ªåŠ¨ç›‘å¬ã€‚è¿™ä¸å…¶ä»– ActionNode çš„æ¿€æ´»è§„åˆ™ä¸ä¸€è‡´ï¼Œç ´åäº† `Flow.Start` ä½œä¸ºå”¯ä¸€èµ·ç‚¹çš„è¯­ä¹‰ã€‚

### 10.2 è®¾è®¡å†³ç­–

æ‰€æœ‰ ActionNode éµå¾ªç»Ÿä¸€çš„æ¿€æ´»è§„åˆ™ï¼š

```
Idle â†’ (æ”¶åˆ° in ç«¯å£äº‹ä»¶) â†’ Running â†’ (æ¡ä»¶æ»¡è¶³) â†’ Completed â†’ (è§¦å‘ out ç«¯å£)
```

`Flow.Start` æ˜¯å”¯ä¸€çš„æµç¨‹èµ·ç‚¹ï¼ŒTrigger èŠ‚ç‚¹åªæ˜¯"æ¡ä»¶ç­‰å¾…èŠ‚ç‚¹"ã€‚

### 10.3 æ”¹åŠ¨å¯¹æ¯”

| é¡¹ç›® | æ—§è®¾è®¡ | æ–°è®¾è®¡ |
|------|--------|--------|
| ç«¯å£ | åªæœ‰ `onEnter` è¾“å‡º | `in`ï¼ˆè¾“å…¥ï¼‰+ `out`ï¼ˆè¾“å‡ºï¼‰ |
| Duration | `Instant` | `Duration`ï¼ˆæŒç»­å‹ï¼ŒRunning é˜¶æ®µæ£€æŸ¥æ¡ä»¶ï¼‰ |
| `maxTriggerTimes` | å­˜åœ¨ | ç§»é™¤ï¼ˆTrigger å°±æ˜¯"ç­‰å¾…ä¸€æ¬¡æ¡ä»¶æ»¡è¶³"ï¼‰ |
| æ¿€æ´»æ–¹å¼ | è‡ªå¯åŠ¨ | é€šè¿‡ `in` ç«¯å£è¢«ä¸Šæ¸¸æ¿€æ´» |
| Running è¡Œä¸º | æ—  | æŒç»­æ£€æŸ¥"ç©å®¶æ˜¯å¦è¿›å…¥åŒºåŸŸ" |

### 10.4 å…¸å‹è“å›¾è¿æ¥

```
æ—§è®¾è®¡ï¼š
  [Trigger.EnterArea] â”€â”€onEnterâ”€â”€â†’ [Spawn.Wave]
  ï¼ˆTrigger æ˜¯ç‹¬ç«‹èµ·ç‚¹ï¼ŒFlow.Start çš„å”¯ä¸€æ€§è¢«ç ´åï¼‰

æ–°è®¾è®¡ï¼š
  [Flow.Start] â”€â”€â†’ [Trigger.EnterArea] â”€â”€outâ”€â”€â†’ [Spawn.Wave] â”€â”€outâ”€â”€â†’ [Flow.End]
  ï¼ˆç»Ÿä¸€æµç¨‹ï¼ŒFlow.Start æ˜¯å”¯ä¸€èµ·ç‚¹ï¼‰
```

### 10.5 è¿è¡Œæ—¶ç³»ç»Ÿ

`TriggerEnterAreaSystem`ï¼ˆOrder=105ï¼‰å¤„ç† `Trigger.EnterArea` èŠ‚ç‚¹ï¼š

- æ‰«ææ‰€æœ‰ `TypeId == "Trigger.EnterArea"` ä¸” `Phase == Running` çš„èŠ‚ç‚¹
- æ£€æŸ¥ç©å®¶æ˜¯å¦åœ¨è§¦å‘åŒºåŸŸå†…ï¼ˆé€šè¿‡ `IPlayerPositionProvider` æ¥å£ï¼‰
- æ¡ä»¶æ»¡è¶³ â†’ `Phase = Completed`ï¼Œç”± `TransitionSystem` è·¯ç”±è‡³ä¸‹æ¸¸
- æœªæ³¨å…¥ `IPlayerPositionProvider` æ—¶é»˜è®¤æ¡ä»¶æ»¡è¶³ï¼ˆæµ‹è¯•æ¨¡å¼ï¼‰

### 10.6 System æ‰§è¡Œé¡ºåº

| System | Order | èŒè´£ |
|--------|-------|------|
| FlowSystem | 10 | å¤„ç† Flow.Start/End/Delay/Join |
| SpawnPresetSystem | 100 | å¤„ç† Spawn.Preset |
| TriggerEnterAreaSystem | 105 | å¤„ç† Trigger.EnterArea |
| SpawnWaveSystem | 110 | å¤„ç† Spawn.Wave |
| TransitionSystem | 900 | ä¼ æ’­å®Œæˆäº‹ä»¶ï¼Œæ¿€æ´»ä¸‹æ¸¸èŠ‚ç‚¹ |

---

## åä¸€ã€ç¼–è¾‘å™¨ Session æ¶æ„ä¸æœåŠ¡åˆ†å±‚

### 11.1 æ•´ä½“åˆ†å±‚

```
SceneBlueprintWindow (çª—å£å±‚)
â”‚  è´Ÿè´£ IMGUI æ¸²æŸ“ã€äº‹ä»¶è°ƒåº¦ã€ç”¨æˆ·äº¤äº’å…¥å£
â”‚  partial åˆ†å‰²ï¼šCallbacks / ContextMenu / Toolbar / Panels / Operations
â”‚
â”œâ”€ BlueprintEditorSession (ä¼šè¯å±‚)
â”‚  è´Ÿè´£ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æœåŠ¡ç»„è£…ã€å…¬å¼€ API æ±‡èš
â”‚  æ ¸å¿ƒå±æ€§ï¼šViewModel / Profile / ActionRegistry / CurrentAsset
â”‚
â””â”€ WindowServices (æœåŠ¡å±‚)
   æ¯ä¸ªæœåŠ¡å°è£…ä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œå®ç° ISessionService æ¥å£
   â€¢ NodePreviewScheduler  â€” é¢„è§ˆè°ƒåº¦
   â€¢ BlueprintAnalysisController â€” åˆ†æç®¡é“
   â€¢ SubGraphController    â€” å­è“å›¾æ“ä½œ
   â€¢ EditorDirtyScheduler  â€” è„æ ‡è®°åˆå¹¶
   â€¢ ExportService / BindingCollector / BindingValidator / ...
```

### 11.2 Session æœåŠ¡æ³¨å†Œè¡¨ï¼ˆv1.4 æ–°å¢ï¼‰

`BlueprintEditorSession` å†…ç½®æ˜¾å¼æœåŠ¡å­—å…¸ï¼Œå°±é™¤äº†æ¯åŠ ä¸€ä¸ªæœåŠ¡éƒ½è¦æš´éœ²ä¸€ä¸ª public å±æ€§çš„é—®é¢˜ï¼š

```csharp
// è°ƒç”¨æ–¹æŒ‰ç±»å‹è·å–æœåŠ¡
_session.GetService<NodePreviewScheduler>()
_session.TryGetService<SubGraphController>(out var ctrl)

// æ ¸å¿ƒå±æ€§ä¿ç•™ä¸º public å±æ€§
_session.ViewModel          // å›¾è§†å›¾æ¨¡å‹
_session.ActionRegistry     // è¡ŒåŠ¨æ³¨å†Œè¡¨
_session.CurrentAsset       // å½“å‰èµ„äº§
_session.Profile            // è“å›¾é…ç½®
```

`Track<T>()` å†…éƒ¨åŒæ—¶å†™å…¥ `_managedServices`ï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰å’Œ `_services`ï¼ˆç±»å‹æŸ¥æ‰¾å­—å…¸ï¼‰ï¼Œæ–°å¢æœåŠ¡ä¸éœ€è¦å†æ·»åŠ  public å±æ€§ã€‚

### 11.3 IBlueprintReadContext æ¥å£

æœåŠ¡å±‚é€šè¿‡æ¥å£è®¿é—® Sessionï¼Œä¸ç›´æ¥ä¾èµ–å…·ä½“å®ç°ï¼š

```csharp
public interface IBlueprintReadContext
{
    GraphViewModel? ViewModel { get; }
    ActionRegistry  ActionRegistry { get; }   // åŸ GetActionRegistry() æ–¹æ³•ï¼Œv1.4 æ”¹ä¸ºå±æ€§
    INodeTypeCatalog NodeCatalog { get; }
    IEditorSpatialModeDescriptor SpatialDescriptor { get; }
    SceneBlueprintToolContext ToolContext { get; }
    ISceneBindingStore BindingStore { get; }
}
```

**v1.4 å˜æ›´**ï¼š`GetActionRegistry()` æ–¹æ³•å‡æ ¼ä¸º `ActionRegistry` å±æ€§ï¼Œæ¶ˆé™¤æ•£è½è°ƒç”¨ã€‚

### 11.4 SubGraphController æœåŠ¡

å­è“å›¾ç›¸å…³æ“ä½œé›†ä¸­åˆ° `SubGraphController`ï¼Œä¸å†æ•£è½åœ¨ Window çš„å„ä¸ª partial æ–‡ä»¶ï¼š

```csharp
internal sealed class SubGraphController : ISessionService
{
    void CollapseAll(bool collapse);   // æŠ˜å å±•å¼€å…¨éƒ¨å­è“å›¾
    void Toggle(string frameId);       // åˆ‡æ¢å•ä¸ªå­è“å›¾çŠ¶æ€
    void CreateEmpty(string title);    // æ–°å»ºç©ºå­è“å›¾
    void GroupSelected(string title, IEnumerable<string> nodeIds); // åˆ†ç»„
    void Ungroup(string frameId);      // è§£æ•£
}
```

è¾¹ç•Œç«¯å£é»˜è®¤å®šä¹‰æ”¶æ‹¢åˆ° `SceneBlueprintProfile.DefaultSubGraphBoundaryPorts`ï¼Œæ¶ˆé™¤ç¡¬ç¼–ç ã€‚

### 11.5 PreviewStateTracker å» Unity ä¾èµ–

`PreviewStateTracker` æ˜¯çº¯æ•°æ®å±‚ï¼Œä¸å¼•å…¥ `UnityEngine` æˆ– `SceneBlueprint.Runtime.Markers`ï¼š

| è´£ä»» | å±‚çº§ |
|------|------|
| è„æ ‡è®°é˜Ÿåˆ— / MarkerIdâ†”NodeId ç´¢å¼• / å›¾å½¢çŠ¶å¿«ç…§ | `PreviewStateTracker`ï¼ˆçº¯ C#ï¼‰ |
| `ComputeMarkerSignature`ï¼ˆå±•å¼€ Vector3/Quaternionï¼‰ | `NodePreviewScheduler`ï¼ˆæœ‰ Unity ä¾èµ–ï¼‰ |

`PreviewStateTracker.QuantizeComponents(float x, float y, float z)` æä¾›çº¯ C# é‡åŒ–è¾…åŠ©æ–¹æ³•ï¼Œç”± `NodePreviewScheduler` å±•å¼€ `Vector3` åä¼ å…¥ã€‚

### 11.6 ActionRegistry.AutoDiscover TypeCache ä¼˜åŒ–

åœ¨ Unity Editor å´ä½¿ç”¨ `TypeCache` æ›¿ä»£ `AppDomain.GetAssemblies()` å…¨åå°„æ‰«æï¼š

```csharp
// SceneBlueprintProfile.BuildRegistry()â€”â€”Editor å±‚å…¥å£
private static ActionRegistry BuildRegistry()
{
    var registry = new ActionRegistry();
    // TypeCache æ˜¯ç¼–è¯‘æ—¶ç¼“å­˜ï¼Œæ¯” Assembly.GetTypes() å¿« 10-100 å€
    registry.AutoDiscover(TypeCache.GetTypesDerivedFrom<IActionDefinitionProvider>());
    RegisterTemplates(registry);
    ApplyCategoryThemeColors(registry);
    return registry;
}
```

`ActionRegistry.AutoDiscover(IEnumerable<Type> types)` é‡è½½æ”¯æŒæ¥å—å¤–éƒ¨ç±»å‹é›†åˆï¼Œä¸æ”¹å˜åŸæœ‰æ— å‚æ•°å½¢å¼ï¼ˆé Editor ç¯å¢ƒä»å¯ç”¨ï¼‰ã€‚

---

## é™„å½•

### æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|-----|------|
| **SceneView** | Unity çš„åœºæ™¯ç¼–è¾‘è§†å›¾ï¼Œç”¨äºå¯è§†åŒ–ç¼–è¾‘ 3D åœºæ™¯ |
| **Blueprint** | é€»è¾‘è“å›¾ï¼Œé€šè¿‡èŠ‚ç‚¹å›¾ç¼–æ’æ¸¸æˆé€»è¾‘ |
| **Marker** | åœºæ™¯ä¸­çš„ç©ºé—´æ ‡è®°ï¼Œæè¿°ä½ç½®ã€åŒºåŸŸã€è·¯å¾„ç­‰ |
| **SceneBinding** | Blueprint èŠ‚ç‚¹å¯¹ Marker çš„å¼•ç”¨å…³ç³» |
| **Playbook** | å¯¼å‡ºçš„è“å›¾è¿è¡Œæ—¶æ•°æ®ï¼ŒåŒ…å«èŠ‚ç‚¹å’Œè¿çº¿ä¿¡æ¯ |
| **å•å‘æ•°æ®æµ** | SceneView â†’ Blueprint çš„å•å‘ä¾èµ–ï¼Œé¿å…å¾ªç¯ä¾èµ– |
| **åœºæ™¯ä¸­å¿ƒåŒ–** | SceneView ä½œä¸ºç©ºé—´æ•°æ®çš„å”¯ä¸€æƒå¨æ¥æº |
| **ä½ç½®ç”Ÿæˆå·¥å…·** | ç¼–è¾‘å™¨è¾…åŠ©å·¥å…·ï¼Œå¸®åŠ©ç­–åˆ’åœ¨ AreaMarker å†…å¿«é€Ÿé“ºè®¾ PointMarkerï¼ˆéšæœº/é˜µå‹/æ‰‹åŠ¨ï¼‰ |
| **å›ºåŒ–** | å°†ç¼–è¾‘å™¨ä¸­çš„ä¸´æ—¶é¢„è§ˆç‚¹è½¬åŒ–ä¸ºæŒä¹…åŒ–çš„ PointMarker çš„è¿‡ç¨‹ |
| **é¢„è®¾åˆ·æ€ª** | ç­–åˆ’ç²¾ç¡®æ‘†æ”¾ä½ç½®ï¼Œè¿è¡Œæ—¶åœ¨å›ºå®šåæ ‡æ”¾ç½®æ€ªç‰©ï¼ˆè·¯å¾„ Aï¼‰ |
| **è¿è¡Œæ—¶éšæœºåˆ·æ€ª** | è¿è¡Œæ—¶åœ¨åŒºåŸŸå†…éšæœºç”Ÿæˆä½ç½®ï¼Œæ¯æ¬¡ç©éƒ½ä¸åŒï¼ˆè·¯å¾„ Bï¼‰ |
| **StructList** | ç»“æ„åŒ–åˆ—è¡¨å±æ€§ç±»å‹ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«å¤šä¸ªå­å­—æ®µï¼ŒInspector ä¸­æ˜¾ç¤ºä¸ºå¯æ’åºåˆ—è¡¨ |
| **æ¡ä»¶ç­‰å¾…èŠ‚ç‚¹** | æœ‰ in ç«¯å£ï¼Œè¢«æ¿€æ´»åè¿›å…¥ Runningï¼ŒæŒç»­æ£€æŸ¥æ¡ä»¶ï¼Œæ»¡è¶³å Completedï¼ˆå¦‚ Trigger.EnterAreaï¼‰ |
| **TriggerEnterAreaSystem** | è¿è¡Œæ—¶ç³»ç»Ÿï¼Œå¤„ç† Trigger.EnterArea èŠ‚ç‚¹çš„åŒºåŸŸæ£€æµ‹é€»è¾‘ï¼ˆOrder=105ï¼‰ |

---

### è®¾è®¡å†³ç­–è®°å½•

| å†³ç­– | ç†ç”± | å½±å“ |
|-----|------|------|
| é‡‡ç”¨å•å‘æ•°æ®æµ | é¿å…åŒå‘åŒæ­¥çš„å¤æ‚åº¦ | ç®€åŒ–æŠ€æœ¯å®ç°ï¼Œé™ä½ Bug é£é™© |
| Marker åªå­˜ç©ºé—´æ•°æ® | èŒè´£åˆ†ç¦»ï¼Œä¿æŒ Marker çš„çº¯ç²¹æ€§ | é€»è¾‘éƒ½åœ¨ Blueprintï¼Œä¾¿äºæ•´ä½“æŠŠæ§ |
| ä¸æ”¯æŒ Blueprint åˆ›å»º Marker | ç»´æŠ¤"SceneView æ˜¯å”¯ä¸€æ¥æº"çš„åŸåˆ™ | ç­–åˆ’å¿…é¡»å…ˆåœ¨åœºæ™¯ä¸­æ ‡æ³¨ |
| ä½¿ç”¨ Marker ID å¼•ç”¨ | è§£è€¦ç©ºé—´æ•°æ®å’Œé€»è¾‘æ•°æ® | åœºæ™¯è°ƒæ•´æ— éœ€ä¿®æ”¹è“å›¾ |
| æä¾›â€œè§†è§‰æŠ•å½±â€è€ŒéåŒå‘åŒæ­¥ | åœ¨ä¸å¢åŠ å¤æ‚åº¦çš„å‰æä¸‹æå‡ UX | ç­–åˆ’èƒ½ç†è§£è“å›¾çš„ç©ºé—´å«ä¹‰ |
| Blueprint = è¿è¡Œæ—¶è§„åˆ™å›¾çš„ç¼–è¾‘æ—¶æè¿° | æ˜ç¡®èŒè´£è¾¹ç•Œï¼Œé¿å…ç¼–è¾‘æ—¶å·¥å…·ä¸è¿è¡Œæ—¶é€»è¾‘æ··æ·† | ç¼–è¾‘å™¨å·¥å…·äº§å‡º Markerï¼ŒBlueprint èŠ‚ç‚¹äº§å‡º Playbook æ•°æ® |
| é¢„è®¾åˆ·æ€ªä¸è¿è¡Œæ—¶éšæœºåˆ†ç¦» | ä¸¤ç§éœ€æ±‚æœ¬è´¨ä¸åŒï¼Œä¸åº”å…±ç”¨åŒä¸€æ¡è·¯å¾„ | è·¯å¾„ Aï¼ˆç¼–è¾‘å™¨å·¥å…· + Spawn.Presetï¼‰ä¸è·¯å¾„ Bï¼ˆLocation.RandomArea + Spawn.Executeï¼‰å¹¶å­˜ |
| StructList ä»¥ JSON å­—ç¬¦ä¸²å­˜å‚¨åœ¨ PropertyBag ä¸­ | é›¶ä¾µå…¥ï¼Œä¸éœ€è¦æ”¹åŠ¨ PropertyBag å’Œåºåˆ—åŒ–å™¨ | ç¼–è¾‘å™¨å±‚è´Ÿè´£ JSON â†” åˆ—è¡¨è½¬æ¢ï¼Œå¯¼å‡ºæ ¼å¼ ValueType="json" |
| StructList èŠ‚ç‚¹ç”»å¸ƒåªæ˜¾ç¤ºæ‘˜è¦ | ç”»å¸ƒç©ºé—´æœ‰é™ï¼Œè¯¦ç»†ç¼–è¾‘åœ¨ä¾§è¾¹ Inspector | ä½¿ç”¨ SummaryFormat æ¨¡æ¿æ ¼å¼åŒ–ï¼ˆå¦‚"æ³¢æ¬¡: {count} æ³¢"ï¼‰ |
| Trigger èŠ‚ç‚¹ç»Ÿä¸€ä¸ºæ¡ä»¶ç­‰å¾…èŠ‚ç‚¹ | ç»Ÿä¸€ ActionNode æ¿€æ´»è¯­ä¹‰ï¼ŒFlow.Start æ˜¯å”¯ä¸€èµ·ç‚¹ | Trigger.EnterArea æ–°å¢ in ç«¯å£ï¼Œç§»é™¤ maxTriggerTimesï¼ŒDuration æ”¹ä¸º Duration |
| ç§»é™¤ Trigger.EnterArea çš„ maxTriggerTimes | Trigger å°±æ˜¯"ç­‰å¾…ä¸€æ¬¡æ¡ä»¶æ»¡è¶³"ï¼Œå¤šæ¬¡è§¦å‘é€šè¿‡è“å›¾å¾ªç¯å®ç° | ç®€åŒ–èŠ‚ç‚¹è¯­ä¹‰å’ŒçŠ¶æ€ç®¡ç† |

---

### æœªæ¥æ‰©å±•æ–¹å‘

1. **æ¨¡æ¿ç³»ç»Ÿ**ï¼šé¢„è®¾å¸¸è§æˆ˜æ–—åœºæ™¯çš„æ¨¡æ¿ï¼ˆåŸ‹ä¼æˆ˜ã€é˜²å®ˆæˆ˜ã€Boss æˆ˜ç­‰ï¼‰
2. **æ™ºèƒ½æ¨è**ï¼šæ ¹æ®åœºæ™¯å¸ƒå±€è‡ªåŠ¨æ¨èè“å›¾ç»“æ„
3. **å¯è§†åŒ–è°ƒè¯•**ï¼šè¿è¡Œæ—¶åœ¨ SceneView ä¸­å¯è§†åŒ–è“å›¾æ‰§è¡Œæµç¨‹
4. **ç‰ˆæœ¬æ§åˆ¶å¢å¼º**ï¼šå·®å¼‚å¯¹æ¯”ï¼Œå†²çªè§£å†³
5. **å¤šäººåä½œ**ï¼šé”å®šæœºåˆ¶ï¼Œå®æ—¶åŒæ­¥

---

### ç›¸å…³æ–‡æ¡£

- [èŠ‚ç‚¹æ¿€æ´»è¯­ä¹‰ä¸æ±‡èšè®¾è®¡.md](./èŠ‚ç‚¹æ¿€æ´»è¯­ä¹‰ä¸æ±‡èšè®¾è®¡.md) - èŠ‚ç‚¹æ¿€æ´»è§„åˆ™å’Œ Flow.Join è®¾è®¡
- [æ•°æ®æµèŠ‚ç‚¹ç³»ç»Ÿè®¾è®¡.md](./æ•°æ®æµèŠ‚ç‚¹ç³»ç»Ÿè®¾è®¡.md) - èŠ‚ç‚¹ç³»ç»Ÿçš„æŠ€æœ¯å®ç°ç»†èŠ‚
- [Playbookæ¦‚å¿µä¸ç¤ºä¾‹.md](./Playbookæ¦‚å¿µä¸ç¤ºä¾‹.md) - è¿è¡Œæ—¶ç³»ç»Ÿè¯´æ˜
- [æ–‡æ¡£å¯¼èˆª.md](./æ–‡æ¡£å¯¼èˆª.md) - å®Œæ•´æ–‡æ¡£ç´¢å¼•

---

**ç‰ˆæœ¬å†å²**ï¼š

- **v1.4** (2026-02-22)
  - æ–°å¢â€œç¼–è¾‘å™¨ Session æ¶æ„ä¸æœåŠ¡åˆ†å±‚â€ç« èŠ‚ï¼ˆç¬¬åä¸€ç« ï¼‰
  - Session æœåŠ¡æ³¨å†Œè¡¨ï¼š`GetService<T>()` / `TryGetService<T>()`ï¼Œæ–°å¢æœåŠ¡ä¸éœ€æš´éœ² public å±æ€§
  - `IBlueprintReadContext.GetActionRegistry()` å‡æ ¼ä¸º `ActionRegistry` å±æ€§
  - `SubGraphController` æœåŠ¡æ”¶æ‹¢å­è“å›¾æ“ä½œï¼›é»˜è®¤è¾¹ç•Œç«¯å£å®šä¹‰ç§»è‡³ `SceneBlueprintProfile.DefaultSubGraphBoundaryPorts`
  - `PreviewStateTracker` å» Unity ä¾èµ–ï¼šç­¾åè®¡ç®—ç§»è‡³ `NodePreviewScheduler`ï¼Œçº¯ C# `QuantizeComponents` æ–¹æ³•
  - `ActionRegistry.AutoDiscover` å¢åŠ  `IEnumerable<Type>` é‡è½½ï¼›Editor å±‚æ”¹ç”¨ `TypeCache` ä¼˜åŒ–åå°„æ‰«æ
  - `BlueprintProfile.BuildRenderConfig()` æ”¶æ‹¢æ¸²æŸ“é…ç½®æ„å»ºé€»è¾‘

- **v1.3** (2026-02-19)
  - æ–°å¢"PropertyType æ‰©å±•ï¼šStructList ç»“æ„åŒ–åˆ—è¡¨"ç« èŠ‚ï¼ˆç¬¬ä¹ç« ï¼‰
  - æ–°å¢"Trigger èŠ‚ç‚¹ç»Ÿä¸€ä¸ºæ¡ä»¶ç­‰å¾…èŠ‚ç‚¹"ç« èŠ‚ï¼ˆç¬¬åç« ï¼‰
  - StructListï¼šæ‰©å±• PropertyType æ”¯æŒç»“æ„åŒ–åˆ—è¡¨ï¼ŒInspector å¯è§†åŒ–ç¼–è¾‘ï¼Œå¯¼å‡ºä¸º JSON
  - Trigger ç»Ÿä¸€ï¼šTrigger.EnterArea æ–°å¢ in ç«¯å£ï¼Œæ”¹ä¸ºæ¡ä»¶ç­‰å¾…èŠ‚ç‚¹ï¼Œç»Ÿä¸€ ActionNode æ¿€æ´»è¯­ä¹‰
  - æ–°å¢ TriggerEnterAreaSystem è¿è¡Œæ—¶ç³»ç»Ÿï¼ˆOrder=105ï¼‰
  - è®°å½• System æ‰§è¡Œé¡ºåºè¡¨ï¼ˆFlowSystem:10 â†’ ä¸šåŠ¡:100~199 â†’ TransitionSystem:900ï¼‰
  - åˆ é™¤ç‹¬ç«‹è®¾è®¡æ–‡æ¡£ `BlueprintèŠ‚ç‚¹ä¸å±æ€§ç³»ç»Ÿä¼˜åŒ–è®¾è®¡.md`ï¼Œå†…å®¹åˆå¹¶è‡³æ­¤

- **v1.2** (2026-02-17)
  - æ–°å¢â€œBlueprint å®šä½ä¸ç¼–è¾‘å™¨å·¥å…·è¾¹ç•Œâ€ç« èŠ‚ï¼ˆç¬¬å…«ç« ï¼‰
  - æ˜ç¡® Blueprint = è¿è¡Œæ—¶è§„åˆ™å›¾çš„ç¼–è¾‘æ—¶æè¿°ï¼Œä¸æ˜¯ç¼–è¾‘æ—¶æ“ä½œå·¥å…·
  - å®šä¹‰ç¼–è¾‘å™¨å·¥å…· vs Blueprint èŠ‚ç‚¹çš„åˆ¤å®šè§„åˆ™
  - åŒºåˆ†é¢„è®¾åˆ·æ€ªï¼ˆè·¯å¾„ Aï¼‰ä¸è¿è¡Œæ—¶éšæœºåˆ·æ€ªï¼ˆè·¯å¾„ Bï¼‰ä¸¤æ¡ç‹¬ç«‹è·¯å¾„
  - æè¿°ä½ç½®ç”Ÿæˆå·¥å…·çš„ç­–åˆ’å·¥ä½œæµï¼ˆéšæœº/é˜µå‹ â†’ å¾®è°ƒ â†’ å›ºåŒ–ï¼‰
  - æ–°å¢åæ¨¡å¼ï¼šæ··æ·†ç¼–è¾‘æ—¶ä¸è¿è¡Œæ—¶

- **v1.1** (2026-02-17)
  - æ–°å¢â€œç¼–è¾‘å™¨é¢„è§ˆåˆ·æ–°ä¸ä¸€è‡´æ€§ç­–ç•¥â€ç« èŠ‚
  - æ˜ç¡®äº‹ä»¶é©±åŠ¨è„åˆ·æ–°ã€marker/node ç²’åº¦ä¼˜åŒ–ã€èŠ‚ç‚¹ç­¾åçŸ­è·¯ä¸å…–åº•ç­–ç•¥
  - è¡¥å…… `doc_status` / `last_reviewed` æ–‡æ¡£æ²»ç†å…ƒä¿¡æ¯

- **v1.0** (2026-02-16)
  - åˆå§‹ç‰ˆæœ¬
  - ç¡®ç«‹åœºæ™¯ä¸­å¿ƒåŒ–ã€èŒè´£åˆ†ç¦»ã€å•å‘æ•°æ®æµä¸‰å¤§æ ¸å¿ƒåŸåˆ™
  - å®šä¹‰ SceneView ä¸ Blueprint çš„èŒè´£è¾¹ç•Œ
  - æè¿°æ¨èçš„å·¥ä½œæµæ¨¡å¼å’Œæœ€ä½³å®è·µ
  - è­¦ç¤ºå¸¸è§åæ¨¡å¼
